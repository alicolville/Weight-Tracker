!function(m){"use strict";var e={pips:function(e){var p,i,l,s,t,o=this,a="",d=o._valueMin(),u=(o._valueMax()-d)/o.options.step,n=o.element.find(".ui-slider-handle"),f={first:"label",last:"label",rest:"pip",labels:!1,prefix:"",suffix:"",step:100<u?Math.floor(.05*u):1,formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===m.type(e)||"undefined"===m.type(e)){m.extend(f,e),o.element.data("pips-options",f),o.options.pipStep=Math.abs(Math.round(f.step))||1,o.element.off(".selectPip").addClass("ui-slider-pips").find(".ui-slider-pip").remove();var r={single:function(s){this.resetClasses(),t.filter(".ui-slider-pip-"+this.classLabel(s)).addClass("ui-slider-pip-selected"),o.options.range&&t.each(function(e,i){var l=m(i).children(".ui-slider-label").data("value");("min"===o.options.range&&l<s||"max"===o.options.range&&s<l)&&m(i).addClass("ui-slider-pip-inrange")})},range:function(s){for(this.resetClasses(),p=0;p<s.length;p++)t.filter(".ui-slider-pip-"+this.classLabel(s[p])).addClass("ui-slider-pip-selected-"+(p+1));o.options.range&&t.each(function(e,i){var l=m(i).children(".ui-slider-label").data("value");l>s[0]&&l<s[1]&&m(i).addClass("ui-slider-pip-inrange")})},classLabel:function(e){return e.toString().replace(".","-")},resetClasses:function(){var l=/(^|\s*)(ui-slider-pip-selected|ui-slider-pip-inrange)(-{1,2}\d+|\s|$)/gi;t.removeClass(function(e,i){return(i.match(l)||[]).join(" ")})}};for(a+=h("first"),l=o.options.pipStep;l<u;l+=o.options.pipStep)a+=h(l);for(a+=h("last"),o.element.append(a),t=o.element.find(".ui-slider-pip"),s=m._data(o.element.get(0),"events").mousedown&&m._data(o.element.get(0),"events").mousedown.length?m._data(o.element.get(0),"events").mousedown:o.element.data("mousedown-handlers"),o.element.data("mousedown-handlers",s.slice()),i=0;i<s.length;i++)"slider"===s[i].namespace&&o.element.data("mousedown-original",s[i].handler);o.element.off("mousedown.slider").on("mousedown.selectPip",function(e){var i,l=m(e.target),s=c(l.data("value")),t=n.eq(s);t.addClass("ui-state-active"),l.is(".ui-slider-label")?(i=l,s=e,o.option("disabled")||(i=c(l=m(i).data("value")),o.values()&&o.values().length?o.options.values[i]=o._trimAlignValue(l):o.options.value=o._trimAlignValue(l),o._refreshValue(),o._change(s,i)),o.element.one("mouseup.selectPip",function(){t.removeClass("ui-state-active").focus()})):o.element.data("mousedown-original")(e)}),o.element.on("slide.selectPip slidechange.selectPip",function(e,i){var l=m(this),s=l.slider("value"),l=l.slider("values");i&&(s=i.value,l=i.values),o.values()&&o.values().length?r.range(l):r.single(s)})}else"destroy"===e?o.element.off(".selectPip").on("mousedown.slider",o.element.data("mousedown-original")).removeClass("ui-slider-pips").find(".ui-slider-pip").remove():"refresh"===e&&o.element.slider("pips",o.element.data("pips-options"));function c(i){var e,l,s,t,a,n=[],r=0;if(o.values()&&o.values().length){for(s=o.values(),t=m.map(s,function(e){return Math.abs(e-i)}),a=Math.min.apply(Math,t),e=0;e<t.length;e++)t[e]===a&&n.push(e);for(r=n[0],l=0;l<n.length;l++)o._lastChangedValue===n[l]&&(r=n[l]);o.options.range&&2===n.length&&(i>s[1]?r=n[1]:i<s[0]&&(r=n[0]))}return r}function h(e){var i,l,s,t=e,a="ui-slider-pip",n=o.value(),r=o.values();if("first"===e?t=0:"last"===e&&(t=u),s=(l=d+o.options.step*t).toString().replace(".","-"),t=t+d-d,t="array"===m.type(f.labels)?f.labels[t]||"":"object"===m.type(f.labels)?"first"===e?f.labels.first||"":"last"===e?f.labels.last||"":"array"===m.type(f.labels.rest)?f.labels.rest[t-1]||"":l:l,"first"===e?(i="0%",a+=" ui-slider-pip-first",a+="label"===f.first?" ui-slider-pip-label":"",a+=!1===f.first?" ui-slider-pip-hide":""):"last"===e?(i="100%",a+=" ui-slider-pip-last",a+="label"===f.last?" ui-slider-pip-label":"",a+=!1===f.last?" ui-slider-pip-hide":""):(i=(100/u*e).toFixed(4)+"%",a+="label"===f.rest?" ui-slider-pip-label":"",a+=!1===f.rest?" ui-slider-pip-hide":""),a+=" ui-slider-pip-"+s,r&&r.length){for(p=0;p<r.length;p++)l===r[p]&&(a+=" ui-slider-pip-initial-"+(p+1),a+=" ui-slider-pip-selected-"+(p+1));o.options.range&&l>r[0]&&l<r[1]&&(a+=" ui-slider-pip-inrange")}else l===n&&(a+=" ui-slider-pip-initial",a+=" ui-slider-pip-selected"),o.options.range&&("min"===o.options.range&&l<n||"max"===o.options.range&&n<l)&&(a+=" ui-slider-pip-inrange");return'<span class="'+a+'" style="'+("horizontal"===o.options.orientation?"left: "+i:"bottom: "+i)+'"><span class="ui-slider-line"></span><span class="ui-slider-label" data-value="'+l+'">'+f.formatLabel(t)+"</span></span>"}},float:function(e){var s,i,t=this,a=t._valueMin(),n=t._valueMax(),l=t._value(),r=t._values(),p=t.element.find(".ui-slider-handle"),o={handle:!0,pips:!1,labels:!1,prefix:"",suffix:"",event:"slidechange slide",formatLabel:function(e){return this.prefix+e+this.suffix}};if("object"===m.type(e)||"undefined"===m.type(e)){if(m.extend(o,e),t.element.data("float-options",o),l<a&&(l=a),n<l&&(l=n),r&&r.length)for(s=0;s<r.length;s++)r[s]<a&&(r[s]=a),r[s]>n&&(r[s]=n);if(t.element.addClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove(),o.handle)for(i=t.values()&&t.values().length?d(r):d([l]),s=0;s<i.length;s++)p.eq(s).append(m('<span class="ui-slider-tip">'+o.formatLabel(i[s])+"</span>"));o.pips&&t.element.find(".ui-slider-label").each(function(e,i){var l=m(i),i=[l.data("value")],i=o.formatLabel(d(i)[0]);m('<span class="ui-slider-tip-label">'+i+"</span>").insertAfter(l)}),"slide"!==o.event&&"slidechange"!==o.event&&"slide slidechange"!==o.event&&"slidechange slide"!==o.event&&(o.event="slidechange slide"),t.element.off(".sliderFloat").on(o.event+".sliderFloat",function(e,i){var l="array"===m.type(i.value)?i.value:[i.value],l=o.formatLabel(d(l)[0]);m(i.handle).find(".ui-slider-tip").html(l)})}else"destroy"===e?t.element.off(".sliderFloat").removeClass("ui-slider-float").find(".ui-slider-tip, .ui-slider-tip-label").remove():"refresh"===e&&t.element.slider("float",t.element.data("float-options"));function d(e){var i=[],l=m.map(e,function(e){return Math.ceil((e-a)/t.options.step)});if("array"===m.type(o.labels))for(s=0;s<e.length;s++)i[s]=o.labels[l[s]]||e[s];else if("object"===m.type(o.labels))for(s=0;s<e.length;s++)e[s]===a?i[s]=o.labels.first||a:e[s]===n?i[s]=o.labels.last||n:"array"===m.type(o.labels.rest)?i[s]=o.labels.rest[l[s]-1]||e[s]:i[s]=e[s];else for(s=0;s<e.length;s++)i[s]=e[s];return i}}};m.extend(!0,m.ui.slider.prototype,e)}(jQuery);

function ws_ls_log(e){window.console&&console.log(e)}jQuery(document).ready(function(e,t){function r(r,a,o){(i={}).action=r,i.security=ws_user_table_config.security;var i=obj3=e.extend(i,a),l="undefined"==typeof ajaxurl&&t!==ws_user_table_config["ajax-url"]?ws_user_table_config["ajax-url"]:ajaxurl;e.post(l,i,function(e,t){o&&o(e,t)})}function a(t,a){var i="#"+t.table_id,n={};n.date=function(e){return"<b>DATE: "+e+"</b>"};var s=l()?2:3;t.columns[s].formatter=n.date;var d=o(t.columns);e(i).removeClass("ws-ls-loading-table"),e(i).footable({columns:d,rows:t.rows,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!1,deleteRow:function(t){if(confirm(ws_user_table_config["label-confirm-delete"])){var a=t.val();if(e.isNumeric(a.db_row_id)&&e.isNumeric(a.user_id)){var o={};o.row_id=a.db_row_id,o.user_id=a.user_id,t.delete(),r("delete_entry",o,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();if(!0===l()){var r=ws_user_table_config["edit-url"];r=r.replace("|ws-id|",t.db_row_id),window.location.href=r+"&user-id="+t.user_id+"&redirect="+ws_user_table_config["current-url-base64"]}else window.location.href=ws_user_table_config["base-url"]+"&mode=entry&user-id="+t.user_id+"&entry-id="+t.db_row_id+"&redirect="+ws_user_table_config["current-url-base64"]}}}),e(i+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"])}function o(e){if(void 0!==e&&e.length){var t={};t.date=i;for(var r=0;r<e.length;r++)void 0!==t[e[r].name]&&(ws_ls_log("Applying formatter for: "+e[r].name),e[r].formatter=t.date)}return e}function i(e){var t=e.split(" "),r=(t=new Date(t[0])).getDate(),a=t.getMonth()+1,o=t.getFullYear();return"false"==ws_user_table_config["us-date"]?r+"/"+a+"/"+o:a+"/"+r+"/"+o}function l(){return t!==ws_user_table_config["front-end"]&&"true"==ws_user_table_config["front-end"]}ws_ls_log("Processing user data tables.."),e(".ws-ls-footable").footable({}),e(".ws-ls-cancel-form").click(function(r){r.preventDefault();var a=e(this).data("form-id");if(t!==a){var o=e("#"+a+" #ws_redirect").val();t!==o&&(window.location.href=o.replace("ws-edit-saved","ws-edit-cancel"))}}),e(".ws-ls-user-data-ajax").each(function(){var t=e(this).attr("id"),o=e(this).data("user-id"),i=e(this).data("max-entries"),n=e(this).data("small-width");ws_ls_log("Setting up table: "+t);var s={};s.user_id=o,s.max_entries=i,s.small_width=n,s.table_id=t,s["front-end"]=l(),r("table_data",s,a)})});
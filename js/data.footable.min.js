function ws_ls_log(e){window.console&&console.log(e)}jQuery(document).ready(function(e,t){function r(r,a,i){(n={}).action=r,n.security=ws_user_table_config.security;var n=obj3=e.extend(n,a),o="undefined"==typeof ajaxurl&&t!==ws_user_table_config["ajax-url"]?ws_user_table_config["ajax-url"]:ajaxurl;e.post(o,n,function(e,t){i&&i(e,t)})}function a(t,a){var n="#"+t.table_id,l={};l.date=function(e){return"<b>DATE: "+e+"</b>"};var s=o()?2:3;t.columns[s].formatter=l.date;var d=i(t.columns);e(n).removeClass("ws-ls-loading-table"),e(n).footable({columns:d,rows:t.rows,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!1,deleteRow:function(t){if(confirm(ws_user_table_config["label-confirm-delete"])){var a=t.val();if(e.isNumeric(a.db_row_id)&&e.isNumeric(a.user_id)){var i={};i.row_id=a.db_row_id,i.user_id=a.user_id,t.delete(),r("delete_entry",i,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();if(!0===o()){var r=ws_user_table_config["edit-url"];r=r.replace("|ws-id|",t.db_row_id),window.location.href=r+"&user-id="+t.user_id+"&redirect="+ws_user_table_config["current-url-base64"]}else window.location.href=ws_user_table_config["base-url"]+"&mode=entry&user-id="+t.user_id+"&entry-id="+t.db_row_id+"&redirect="+ws_user_table_config["current-url-base64"]}}}),e(n+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"])}function i(e){if(void 0!==e&&e.length){var t={};t.date=n;for(var r=0;r<e.length;r++)void 0!==t[e[r].name]&&(ws_ls_log("Applying formatter for: "+e[r].name),e[r].formatter=t.date)}return e}function n(e){var t=e.split(" "),r=(t=new Date(t[0])).getDate(),a=t.getMonth()+1,i=t.getFullYear();return"false"==ws_user_table_config["us-date"]?r+"/"+a+"/"+i:a+"/"+r+"/"+i}function o(){return t!==ws_user_table_config["front-end"]&&"true"==ws_user_table_config["front-end"]}ws_ls_log("Processing user data tables.."),e(".ws-ls-cancel-form").click(function(r){r.preventDefault();var a=e(this).data("form-id");if(t!==a){var i=e("#"+a+" #ws_redirect").val();t!==i&&(window.location.href=i.replace("ws-edit-saved","ws-edit-cancel"))}}),e(".ws-ls-user-data-ajax").each(function(){var t=e(this).attr("id"),i=e(this).data("user-id"),n=e(this).data("max-entries"),l=e(this).data("small-width");ws_ls_log("Setting up table: "+t);var s={};s.user_id=i,s.max_entries=n,s.small_width=l,s.table_id=t,s["front-end"]=o(),r("table_data",s,a)})});
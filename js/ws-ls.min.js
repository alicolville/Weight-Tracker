function ws_ls_post_data(a,b){var c=ws_ls_config["ajax-url"];jQuery.post(c,a,function(c){var c=JSON.parse(c);b(a,c)})}function ws_ls_user_preference_callback(a,b){1==b?window.location.replace(ws_ls_config["current-url"]+"?user-preference-saved=true"):console.log("Error saving the user preferences")}function ws_ls_get_querystring_value(a){for(var b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}}$tabs_global=!1,jQuery(document).ready(function(a){function b(b,c){if(1==c){var d=a("#"+b["table-id"]).DataTable(),f=a("#"+b["table-row-id"]);d.row(f).remove().draw(),e()}else console.log("Error deleting entry :(",b,c)}function c(a,b){1==b?e():console.log("Error clearing target :(",a,b)}function d(b,c){if(0!=c){if("true"==ws_ls_config["us-date"]?a("#"+b["form-id"]+" .we-ls-datepicker").val(c["date-us"]):a("#"+b["form-id"]+" .we-ls-datepicker").val(c["date-uk"]),$weight_unit=a("#"+b["form-id"]).data("metric-unit"),"imperial-pounds"==$weight_unit&&a("#"+b["form-id"]+" #we-ls-weight-pounds").val(c.only_pounds),"imperial-both"==$weight_unit&&(a("#"+b["form-id"]+" #we-ls-weight-stones").val(c.stones),a("#"+b["form-id"]+" #we-ls-weight-pounds").val(c.pounds)),"metric"==$weight_unit&&a("#"+b["form-id"]+" #we-ls-weight-kg").val(c.kg),a("#"+b["form-id"]+" #we-ls-notes").val(c.notes),"true"==ws_ls_config["tabs-enabled"]&&$tabs_global.data("zozoTabs").first(),0!=c.measurements){var d=c.measurements;for(var e in d)d.hasOwnProperty(e)&&a("#"+b["form-id"]+" #ws-ls-"+e).val(d[e])}a(".ws-ls-main-weight-form input:visible:nth-child(3)").focus()}else console.log("Error loading entry :(",b,c)}function e(){a(".ws-ls-notice-of-refresh").removeClass("ws-ls-hide")}"true"==ws_ls_config["advanced-tables-enabled"]&&("true"==ws_ls_config["us-date"]?a.fn.dataTable.moment("MM/DD/YYYY"):a.fn.dataTable.moment("DD/MM/YYYY"),a(".ws-ls-advanced-data-table").DataTable({responsive:!0,order:[[1,"desc"]],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],columnDefs:ws_ls_config_advanced_datatables.columns,language:ws_ls_table_locale})),a(".ws-ls-edit-row").click(function(b){b.preventDefault(),$post_data={},$post_data.action="ws_ls_get_entry",$post_data.security=ws_ls_config["ajax-security-nonce"],$post_data["user-id"]=ws_ls_config["user-id"],$post_data["row-id"]=a(this).data("row-id"),$post_data["form-id"]=a(".ws-ls-main-weight-form").attr("id"),ws_ls_post_data($post_data,d)}),a(".ws-ls-delete-row").click(function(c){if(c.preventDefault(),confirm(ws_ls_config["confirmation-delete"])){var d=a(this).closest("tr"),e=a(this).closest("table");$post_data={},$post_data.action="ws_ls_delete_weight_entry",$post_data.security=ws_ls_config["ajax-security-nonce"],$post_data["user-id"]=ws_ls_config["user-id"],$post_data["table-row-id"]=d.attr("id"),$post_data["table-id"]=e.attr("id"),$post_data["row-id"]=a(this).data("row-id"),ws_ls_post_data($post_data,b)}}),a(".ws-ls-clear-target").click(function(a){a.preventDefault(),confirm(ws_ls_config["clear-target"])&&($post_data={},$post_data.action="ws_ls_clear_target",$post_data.security=ws_ls_config["ajax-security-nonce"],$post_data["user-id"]=ws_ls_config["user-id"],ws_ls_post_data($post_data,c))})}),jQuery(document).ready(function(a){function c(b){$chart_type=a("#"+b).data("chart-type"),"undefined"==typeof $chart_type&&($chart_type="line");var c=a("#"+b).get(0).getContext("2d"),d=a("#"+b).parent().width();a("#"+b).attr("width",d-50),"line"==$chart_type?new Chart(c,{type:"line",data:this[b+"_data"],options:this[b+"_options"]}):"bar"==$chart_type&&new Chart(c,{type:"bar",data:this[b+"_data"],options:this[b+"_options"]})}if("true"==ws_ls_config["tabs-enabled"]){$default_tab="tab1";var b=function(b,c){a("#ws-ls-tabs-loading").addClass("ws-ls-hide"),a("#"+c.id).attr("style","")};$tabs_global=a("#ws-ls-tabs").zozoTabs({rounded:!1,multiline:!0,theme:"silver",size:"medium",responsive:!0,animation:{effects:"slideH",easing:"easeInOutCirc",type:"jquery"},defaultTab:$default_tab,ready:b})}a(".ws-ls-chart").each(function(){$chart_id=a(this).attr("id"),c($chart_id)}),a(".we-ls-datepicker").each(function(){var b={changeMonth:!0,changeYear:!0,showButtonPanel:!0,dateFormat:ws_ls_config["date-format"],showButtonPanel:!0,closeText:ws_ls_config["date-picker-locale"].closeText,currentText:ws_ls_config["date-picker-locale"].currentText,monthNames:ws_ls_config["date-picker-locale"].monthNames,monthNamesShort:ws_ls_config["date-picker-locale"].monthNamesShort,dayNames:ws_ls_config["date-picker-locale"].dayNames,dayNamesShort:ws_ls_config["date-picker-locale"].dayNamesShort,dayNamesMin:ws_ls_config["date-picker-locale"].dayNamesMin,firstDay:ws_ls_config["date-picker-locale"].firstDay};a(this).datepicker(b)}),a(".we-ls-weight-form-validate").each(function(){$form_id=a(this).attr("id"),$target_form=a(this).data("is-target-form"),$weight_unit=a(this).data("metric-unit"),console.log("Adding form validation to: "+$form_id+". Target form? "+$target_form+". Weight Unit: "+$weight_unit),a("#"+$form_id).validate({errorContainer:"#"+$form_id+" .ws-ls-error-summary",errorLabelContainer:"#"+$form_id+" .ws-ls-error-summary ul",wrapper:"li",errorClass:"ws-ls-invalid",validClass:"ws-ls-valid",messages:{"we-ls-date":ws_ls_config["validation-we-ls-date"],"we-ls-weight-pounds":ws_ls_config["validation-we-ls-weight-pounds"],"we-ls-weight-kg":ws_ls_config["validation-we-ls-weight-kg"],"we-ls-weight-stones":ws_ls_config["validation-we-ls-weight-stones"],"we-ls-measurements":ws_ls_config["validation-we-ls-measurements"]},submitHandler:function(a){a.submit()}}),$target_form||a("#"+$form_id+" .we-ls-datepicker").length&&("true"==ws_ls_config["us-date"]?a("#"+$form_id+" .we-ls-datepicker").rules("add",{required:!0,date:!0}):a("#"+$form_id+" .we-ls-datepicker").rules("add",{required:!0,dateITA:!0})),"true"==ws_ls_config["measurements-enabled"]&&1==a("#"+$form_id).data("measurements-enabled")&&a("#"+$form_id+" .ws-ls-measurement").rules("add",{number:!0,range:[1,1e3],messages:{number:ws_ls_config["validation-we-ls-measurements"],range:ws_ls_config["validation-we-ls-measurements"]}}),"imperial-pounds"==$weight_unit&&a("#"+$form_id+" #we-ls-weight-pounds").rules("add",{required:!0,number:!0,range:[0,5e3]}),"imperial-both"==$weight_unit&&(a("#"+$form_id+" #we-ls-weight-stones").rules("add",{required:!0,number:!0,range:[0,5e3]}),a("#"+$form_id+" #we-ls-weight-pounds").rules("add",{required:!0,number:!0,range:[0,14]})),"metric"==$weight_unit&&a("#"+$form_id+" #we-ls-weight-kg").rules("add",{required:!0,number:!0,range:[0,5e4]})}),"true"==ws_ls_config["is-pro"]&&(a(".ws-ls-user-delete-all").validate({errorClass:"ws-ls-invalid",validClass:"ws-ls-valid",errorContainer:".ws-ls-user-delete-all .ws-ls-error-summary",errorLabelContainer:".ws-ls-user-delete-all .ws-ls-error-summary ul",wrapper:"li",messages:{"ws-ls-delete-all":ws_ls_config["validation-we-ls-history"]},submitHandler:function(a){a.submit()}}),a(".ws-ls-user-pref-form").submit(function(b){b.preventDefault(),$post_data={},a(".ws-ls-user-pref-form select").each(function(){$post_data[a(this).attr("id")]=a(this).val()}),$post_data.action="ws_ls_save_preferences",$post_data.security=ws_ls_config["ajax-security-nonce"],$post_data["user-id"]=ws_ls_config["user-id"],ws_ls_post_data($post_data,ws_ls_user_preference_callback)})),a(".ws-ls-reload-page-if-clicked").click(function(a){a.preventDefault(),window.location.replace(ws_ls_config["current-url"])}),a(".ws-ls-progress").each(function(){var b=a(this).attr("id"),c=a(this).data("progress"),d=a(this).data("type"),e={strokeWidth:a(this).data("stroke-width"),easing:"easeInOut",duration:a(this).data("animation-duration"),color:a(this).data("stroke-colour"),trailColor:a(this).data("trail-colour"),trailWidth:a(this).data("trail-width"),svgStyle:{width:a(this).data("width"),height:a(this).data("height")},text:{style:{color:a(this).data("text-colour")}},step:function(b,c){c.setText(Math.round(100*c.value())+"% "+a(this).data("precentage-text"))}};if("circle"==d)var f=new ProgressBar.Circle("#"+b,e);else var f=new ProgressBar.Line("#"+b,e);f.animate(c)})});

/*! ykukUIkit 3.9.4 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */(function(r,s){typeof exports=="object"&&typeof module!="undefined"?module.exports=s(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitupload",["uikit-util"],s):(r=typeof globalThis!="undefined"?globalThis:r||self,r.ykukUIkitUpload=s(r.ykukUIkit.util))})(this,function(r){"use strict";var s={props:{allow:String,clsDragover:String,concurrent:Number,maxSize:Number,method:String,mime:String,msgInvalidMime:String,msgInvalidName:String,msgInvalidSize:String,multiple:Boolean,name:String,params:Object,type:String,url:String},data:{allow:!1,clsDragover:"ykuk-dragover",concurrent:1,maxSize:0,method:"POST",mime:!1,msgInvalidMime:"Invalid File Type: %s",msgInvalidName:"Invalid File Name: %s",msgInvalidSize:"Invalid File Size: %s Kilobytes Max",multiple:!1,name:"files[]",params:{},type:"",url:"",abort:r.noop,beforeAll:r.noop,beforeSend:r.noop,complete:r.noop,completeAll:r.noop,error:r.noop,fail:r.noop,load:r.noop,loadEnd:r.noop,loadStart:r.noop,progress:r.noop},events:{change:function(e){!r.matches(e.target,'input[type="file"]')||(e.preventDefault(),e.target.files&&this.upload(e.target.files),e.target.value="")},drop:function(e){p(e);var n=e.dataTransfer;!n||!n.files||(r.removeClass(this.$el,this.clsDragover),this.upload(n.files))},dragenter:function(e){p(e)},dragover:function(e){p(e),r.addClass(this.$el,this.clsDragover)},dragleave:function(e){p(e),r.removeClass(this.$el,this.clsDragover)}},methods:{upload:function(e){var n=this;if(!!e.length){r.trigger(this.$el,"upload",[e]);for(var o=0;o<e.length;o++){if(this.maxSize&&this.maxSize*1e3<e[o].size){this.fail(this.msgInvalidSize.replace("%s",this.maxSize));return}if(this.allow&&!f(this.allow,e[o].name)){this.fail(this.msgInvalidName.replace("%s",this.allow));return}if(this.mime&&!f(this.mime,e[o].type)){this.fail(this.msgInvalidMime.replace("%s",this.mime));return}}this.multiple||(e=[e[0]]),this.beforeAll(this,e);var t=c(e,this.concurrent),l=function(i){var d=new FormData;i.forEach(function(a){return d.append(n.name,a)});for(var h in n.params)d.append(h,n.params[h]);r.ajax(n.url,{data:d,method:n.method,responseType:n.type,beforeSend:function(a){var m=a.xhr;return m.upload&&r.on(m.upload,"progress",n.progress),["loadStart","load","loadEnd","abort"].forEach(function(u){return r.on(m,u.toLowerCase(),n[u])}),n.beforeSend(a)}}).then(function(a){n.complete(a),t.length?l(t.shift()):n.completeAll(a)},function(a){return n.error(a)})};l(t.shift())}}}};function f(e,n){return n.match(new RegExp("^"+e.replace(/\//g,"\\/").replace(/\*\*/g,"(\\/[^\\/]+)*").replace(/\*/g,"[^\\/]+").replace(/((?!\\))\?/g,"$1.")+"$","i"))}function c(e,n){for(var o=[],t=0;t<e.length;t+=n){for(var l=[],i=0;i<n;i++)l.push(e[t+i]);o.push(l)}return o}function p(e){e.preventDefault(),e.stopPropagation()}return typeof window!="undefined"&&window.ykukUIkit&&window.ykukUIkit.component("upload",s),s});

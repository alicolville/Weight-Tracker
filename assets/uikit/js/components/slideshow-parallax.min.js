/*! yk-uiUIkit 3.9.4 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */(function(t,p){typeof exports=="object"&&typeof module!="undefined"?module.exports=p(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitslideshow_parallax",["uikit-util"],p):(t=typeof globalThis!="undefined"?globalThis:t||self,t.yk-uiUIkitSlideshow_parallax=p(t.yk-uiUIkit.util))})(this,function(t){"use strict";var p={props:{media:Boolean},data:{media:!1},computed:{matchMedia:function(){var e=S(this.media);return!e||window.matchMedia(e).matches}}};function S(e){if(t.isString(e)){if(e[0]==="@"){var r="breakpoint-"+e.substr(1);e=t.toFloat(t.getCssVar(r))}else if(isNaN(e))return e}return e&&!isNaN(e)?"(min-width: "+e+"px)":!1}t.memoize(function(e){return new t.Promise(function(r,n){if(!e){n();return}t.startsWith(e,"data:")?r(decodeURIComponent(e.split(",")[1])):t.ajax(e).then(function(a){return r(a.response)},function(){return n("SVG not found.")})})});function z(e){return Math.ceil(Math.max.apply(Math,[0].concat(t.$$("[stroke]",e).map(function(r){try{return r.getTotalLength()}catch{return 0}}))))}var x=["x","y","bgx","bgy","rotate","scale","color","backgroundColor","borderColor","opacity","blur","hue","grayscale","invert","saturate","sepia","fopacity","stroke"],F={mixins:[p],props:x.reduce(function(e,r){return e[r]="list",e},{}),data:x.reduce(function(e,r){return e[r]=void 0,e},{}),computed:{props:function(e,r){var n=this;return x.reduce(function(a,s){if(t.isUndefined(e[s]))return a;var c=s.match(/color/i),d=c||s==="opacity",o,h,f,i=e[s].slice();d&&t.css(r,s,""),i.length<2&&i.unshift((s==="scale"?1:d?t.css(r,s):0)||0);var l=T(i);if(c){var b=r.style,m=b.color;i=i.map(function(g){return W(r,g)}),r.style.color=m}else if(t.startsWith(s,"bg")){var u=s==="bgy"?"height":"width";if(i=i.map(function(g){return t.toPx(g,u,n.$el)}),t.css(r,"background-position-"+s[2],""),h=t.css(r,"backgroundPosition").split(" ")[s[2]==="x"?0:1],n.covers){var v=Math.min.apply(Math,i),y=Math.max.apply(Math,i),P=i.indexOf(v)<i.indexOf(y);f=y-v,i=i.map(function(g){return g-(P?v:y)}),o=(P?-f:0)+"px"}else o=h}else i=i.map(t.toFloat);if(s==="stroke"){if(!i.some(function(g){return g}))return a;var I=z(n.$el);t.css(r,"strokeDasharray",I),l==="%"&&(i=i.map(function(g){return g*I/100})),i=i.reverse(),s="strokeDashoffset"}return a[s]={steps:i,unit:l,pos:o,bgPos:h,diff:f},a},{})},bgProps:function(){var e=this;return["bgx","bgy"].filter(function(r){return r in e.props})},covers:function(e,r){return N(r)}},disconnected:function(){delete this._image},update:{read:function(e){var r=this;if(!!this.matchMedia){if(!e.image&&this.covers&&this.bgProps.length){var n=t.css(this.$el,"backgroundImage").replace(/^none|url\(["']?(.+?)["']?\)$/,"$1");if(n){var a=new Image;a.src=n,e.image=a,a.naturalWidth||(a.onload=function(){return r.$update()})}}var s=e.image;if(!(!s||!s.naturalWidth)){var c={width:this.$el.offsetWidth,height:this.$el.offsetHeight},d={width:s.naturalWidth,height:s.naturalHeight},o=t.Dimensions.cover(d,c);this.bgProps.forEach(function(h){var f=r.props[h],i=f.diff,l=f.bgPos,b=f.steps,m=h==="bgy"?"height":"width",u=o[m]-c[m];if(u<i)c[m]=o[m]+i-u;else if(u>i){var v=c[m]/t.toPx(l,m,r.$el);v&&(r.props[h].steps=b.map(function(y){return y-(u-i)/v}))}o=t.Dimensions.cover(d,c)}),e.dim=o}}},write:function(e){var r=e.dim;if(!this.matchMedia){t.css(this.$el,{backgroundSize:"",backgroundRepeat:""});return}r&&t.css(this.$el,{backgroundSize:r.width+"px "+r.height+"px",backgroundRepeat:"no-repeat"})},events:["resize"]},methods:{reset:function(){var e=this;t.each(this.getCss(0),function(r,n){return t.css(e.$el,n,"")})},getCss:function(e){var r=this,n=r.props;return Object.keys(n).reduce(function(a,s){var c=n[s],d=c.steps,o=c.unit,h=c.pos,f=_(d,e);switch(s){case"x":case"y":{o=o||"px",a.transform+=" translate"+t.ucfirst(s)+"("+t.toFloat(f).toFixed(o==="px"?0:2)+o+")";break}case"rotate":o=o||"deg",a.transform+=" rotate("+(f+o)+")";break;case"scale":a.transform+=" scale("+f+")";break;case"bgy":case"bgx":a["background-position-"+s[2]]="calc("+h+" + "+f+"px)";break;case"color":case"backgroundColor":case"borderColor":{var i=w(d,e),l=i[0],b=i[1],m=i[2];a[s]="rgba("+l.map(function(u,v){return u=u+m*(b[v]-u),v===3?t.toFloat(u):parseInt(u,10)}).join(",")+")";break}case"blur":o=o||"px",a.filter+=" blur("+(f+o)+")";break;case"hue":o=o||"deg",a.filter+=" hue-rotate("+(f+o)+")";break;case"fopacity":o=o||"%",a.filter+=" opacity("+(f+o)+")";break;case"grayscale":case"invert":case"saturate":case"sepia":o=o||"%",a.filter+=" "+s+"("+(f+o)+")";break;default:a[s]=f}return a},{transform:"",filter:""})}}};function W(e,r){return t.css(t.css(e,"color",r),"color").split(/[(),]/g).slice(1,-1).concat(1).slice(0,4).map(t.toFloat)}function w(e,r){var n=e.length-1,a=Math.min(Math.floor(n*r),n-1),s=e.slice(a,a+2);return s.push(r===1?1:r%(1/n)*n),s}function _(e,r,n){n===void 0&&(n=2);var a=w(e,r),s=a[0],c=a[1],d=a[2];return(t.isNumber(s)?s+Math.abs(s-c)*d*(s<c?1:-1):+c).toFixed(n)}function T(e){return e.reduce(function(r,n){return t.isString(n)&&n.replace(/-|\d/g,"").trim()||r},"")}function N(e){var r=e.style,n=r.backgroundSize,a=t.css(t.css(e,"backgroundSize",""),"backgroundSize")==="cover";return e.style.backgroundSize=n,a}var $={mixins:[F],data:{selItem:"!li"},computed:{item:function(e,r){var n=e.selItem;return t.query(n,r)}},events:[{name:"itemin itemout",self:!0,el:function(){return this.item},handler:function(e){var r=this,n=e.type,a=e.detail,s=a.percent,c=a.duration,d=a.timing,o=a.dir;t.fastdom.read(function(){var h=r.getCss(C(n,o,s)),f=r.getCss(M(n)?.5:o>0?1:0);t.fastdom.write(function(){t.css(r.$el,h),t.Transition.start(r.$el,f,c,d).catch(t.noop)})})}},{name:"transitioncanceled transitionend",self:!0,el:function(){return this.item},handler:function(){t.Transition.cancel(this.$el)}},{name:"itemtranslatein itemtranslateout",self:!0,el:function(){return this.item},handler:function(e){var r=this,n=e.type,a=e.detail,s=a.percent,c=a.dir;t.fastdom.read(function(){var d=r.getCss(C(n,c,s));t.fastdom.write(function(){return t.css(r.$el,d)})})}}]};function M(e){return t.endsWith(e,"in")}function C(e,r,n){return n/=2,M(e)?r<0?1-n:n:r<0?n:1-n}return typeof window!="undefined"&&window.yk-uiUIkit&&window.yk-uiUIkit.component("slideshowParallax",$),$});

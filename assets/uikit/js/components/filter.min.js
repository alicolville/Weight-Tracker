/*! ykukUIkit 3.9.4 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */(function(n,m){typeof exports=="object"&&typeof module!="undefined"?module.exports=m(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitfilter",["uikit-util"],m):(n=typeof globalThis!="undefined"?globalThis:n||self,n.ykukUIkitFilter=m(n.ykukUIkit.util))})(this,function(n){"use strict";function m(r){return q(r,"top","bottom")}function q(r,e,o){for(var a=[[]],s=0;s<r.length;s++){var t=r[s];if(!!n.isVisible(t))for(var c=g(t),f=a.length-1;f>=0;f--){var h=a[f];if(!h[0]){h.push(t);break}var d=void 0;if(h[0].offsetParent===t.offsetParent?d=g(h[0]):(c=g(t,!0),d=g(h[0],!0)),c[e]>=d[o]-1&&c[e]!==d[e]){a.push([t]);break}if(c[o]-1>d[e]||c[e]===d[e]){h.push(t);break}if(f===0){a.unshift([t]);break}}}return a}function g(r,e){var o;e===void 0&&(e=!1);var a=r.offsetTop,s=r.offsetLeft,t=r.offsetHeight,c=r.offsetWidth;return e&&(o=n.offsetPosition(r),a=o[0],s=o[1]),{top:a,left:s,bottom:a+t,right:s+c}}var y="ykuk-transition-leave",$="ykuk-transition-enter";function w(r,e,o,a){a===void 0&&(a=0);var s=l(e,!0),t={opacity:1},c={opacity:0},f=function(v){return function(){return s===l(e)?v():n.Promise.reject()}},h=f(function(){return n.addClass(e,y),n.Promise.all(I(e).map(function(v,u){return new n.Promise(function(i){return setTimeout(function(){return n.Transition.start(v,c,o/2,"ease").then(i)},u*a)})})).then(function(){return n.removeClass(e,y)})}),d=f(function(){var v=n.height(e);return n.addClass(e,$),r(),n.css(n.children(e),{opacity:0}),new n.Promise(function(u){return requestAnimationFrame(function(){var i=n.children(e),p=n.height(e);n.css(e,"alignContent","flex-start"),n.height(e,v);var C=I(e);n.css(i,c);var L=C.map(function(R,_){return new n.Promise(function(G){return setTimeout(function(){return n.Transition.start(R,t,o/2,"ease").then(G)},_*a)})});v!==p&&L.push(n.Transition.start(e,{height:p},o/2+C.length*a,"ease")),n.Promise.all(L).then(function(){n.removeClass(e,$),s===l(e)&&(n.css(e,{height:"",alignContent:""}),n.css(i,{opacity:""}),delete e.dataset.transition),u()})})})});return n.hasClass(e,y)?T(e).then(d):n.hasClass(e,$)?T(e).then(h).then(d):h().then(d)}function l(r,e){return e&&(r.dataset.transition=1+l(r)),n.toNumber(r.dataset.transition)||0}function T(r){return n.Promise.all(n.children(r).filter(n.Transition.inProgress).map(function(e){return new n.Promise(function(o){return n.once(e,"transitionend transitioncanceled",o)})}))}function I(r){return m(n.children(r)).reduce(function(e,o){return e.concat(n.sortBy(o.filter(function(a){return n.isInView(a)}),"offsetLeft"))},[])}function A(r,e,o){return new n.Promise(function(a){return requestAnimationFrame(function(){var s=n.children(e),t=s.map(function(f){return S(f,!0)}),c=n.css(e,["height","padding"]);n.Transition.cancel(e),s.forEach(n.Transition.cancel),F(e),r(),s=s.concat(n.children(e).filter(function(f){return!n.includes(s,f)})),n.Promise.resolve().then(function(){n.fastdom.flush();var f=n.css(e,["height","padding"]),h=z(e,s,t),d=h[0],v=h[1];s.forEach(function(u,i){return v[i]&&n.css(u,v[i])}),n.css(e,n.assign({display:"block"},c)),requestAnimationFrame(function(){var u=s.map(function(i,p){return n.parent(i)===e&&n.Transition.start(i,d[p],o,"ease")}).concat(n.Transition.start(e,f,o,"ease"));n.Promise.all(u).then(function(){s.forEach(function(i,p){return n.parent(i)===e&&n.css(i,"display",d[p].opacity===0?"none":"")}),F(e)},n.noop).then(a)})})})})}function S(r,e){var o=n.css(r,"zIndex");return n.isVisible(r)?n.assign({display:"",opacity:e?n.css(r,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:o==="auto"?n.index(r):o},b(r)):!1}function z(r,e,o){var a=e.map(function(t,c){return n.parent(t)&&c in o?o[c]?n.isVisible(t)?b(t):{opacity:0}:{opacity:n.isVisible(t)?1:0}:!1}),s=a.map(function(t,c){var f=n.parent(e[c])===r&&(o[c]||S(e[c]));if(!f)return!1;if(!t)delete f.opacity;else if(!("opacity"in t)){var h=f.opacity;h%1?t.opacity=1:delete f.opacity}return f});return[a,s]}function F(r){n.css(r.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",marginTop:"",marginLeft:"",transform:"",width:"",zIndex:""}),n.css(r,{height:"",display:"",padding:""})}function b(r){var e=n.offset(r),o=e.height,a=e.width,s=n.position(r),t=s.top,c=s.left,f=n.css(r,["marginTop","marginLeft"]),h=f.marginLeft,d=f.marginTop;return{top:t,left:c,height:o,width:a,marginLeft:h,marginTop:d,transform:""}}var B={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate:function(r,e){var o=this;e===void 0&&(e=this.$el);var a=this.animation,s=a==="fade"?w:a==="delayed-fade"?function(){for(var t=[],c=arguments.length;c--;)t[c]=arguments[c];return w.apply(void 0,t.concat([40]))}:a?A:function(){return r(),n.Promise.resolve()};return s(r,e,this.duration).then(function(){return o.$update(e,"resize")},n.noop)}}},P={mixins:[B],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"ykuk-filter-control",cls:"ykuk-active",duration:250},computed:{toggles:{get:function(r,e){var o=r.attrItem;return n.$$("["+o+"],[data-"+o+"]",e)},watch:function(){var r=this;if(this.updateState(),this.selActive!==!1){var e=n.$$(this.selActive,this.$el);this.toggles.forEach(function(o){return n.toggleClass(o,r.cls,n.includes(e,o))})}},immediate:!0},children:{get:function(r,e){var o=r.target;return n.$$(o+" > *",e)},watch:function(r,e){e&&!N(r,e)&&this.updateState()},immediate:!0}},events:[{name:"click",delegate:function(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler:function(r){r.preventDefault(),this.apply(r.current)}}],methods:{apply:function(r){var e=this.getState(),o=x(r,this.attrItem,this.getState());O(e,o)||this.setState(o)},getState:function(){var r=this;return this.toggles.filter(function(e){return n.hasClass(e,r.cls)}).reduce(function(e,o){return x(o,r.attrItem,e)},{filter:{"":""},sort:[]})},setState:function(r,e){var o=this;e===void 0&&(e=!0),r=n.assign({filter:{"":""},sort:[]},r),n.trigger(this.$el,"beforeFilter",[this,r]),this.toggles.forEach(function(a){return n.toggleClass(a,o.cls,!!H(a,o.attrItem,r))}),n.Promise.all(n.$$(this.target,this.$el).map(function(a){var s=function(){V(r,a,n.children(a)),o.$update(o.$el)};return e?o.animate(s,a):s()})).then(function(){return n.trigger(o.$el,"afterFilter",[o])})},updateState:function(){var r=this;n.fastdom.write(function(){return r.setState(r.getState(),!1)})}}};function E(r,e){return n.parseOptions(n.data(r,e),["filter"])}function O(r,e){return["filter","sort"].every(function(o){return n.isEqual(r[o],e[o])})}function V(r,e,o){var a=W(r);o.forEach(function(h){return n.css(h,"display",a&&!n.matches(h,a)?"none":"")});var s=r.sort,t=s[0],c=s[1];if(t){var f=M(o,t,c);n.isEqual(f,o)||n.append(e,f)}}function x(r,e,o){var a=E(r,e),s=a.filter,t=a.group,c=a.sort,f=a.order;return f===void 0&&(f="asc"),(s||n.isUndefined(c))&&(t?s?(delete o.filter[""],o.filter[t]=s):(delete o.filter[t],(n.isEmpty(o.filter)||""in o.filter)&&(o.filter={"":s||""})):o.filter={"":s||""}),n.isUndefined(c)||(o.sort=[c,f]),o}function H(r,e,o){var a=o.filter;a===void 0&&(a={"":""});var s=o.sort,t=s[0],c=s[1],f=E(r,e),h=f.filter;h===void 0&&(h="");var d=f.group;d===void 0&&(d="");var v=f.sort,u=f.order;return u===void 0&&(u="asc"),n.isUndefined(v)?d in a&&h===a[d]||!h&&d&&!(d in a)&&!a[""]:t===v&&c===u}function N(r,e){return r.length===e.length&&r.every(function(o){return~e.indexOf(o)})}function W(r){var e=r.filter,o="";return n.each(e,function(a){return o+=a||""}),o}function M(r,e,o){return n.assign([],r).sort(function(a,s){return n.data(a,e).localeCompare(n.data(s,e),void 0,{numeric:!0})*(o==="asc"||-1)})}return typeof window!="undefined"&&window.ykukUIkit&&window.ykukUIkit.component("filter",P),P});

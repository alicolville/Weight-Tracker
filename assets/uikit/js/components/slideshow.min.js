/*! ykukUIkit 3.9.4 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */(function(n,g){typeof exports=="object"&&typeof module!="undefined"?module.exports=g(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitslideshow",["uikit-util"],g):(n=typeof globalThis!="undefined"?globalThis:n||self,n.ykukUIkitSlideshow=g(n.ykukUIkit.util))})(this,function(n){"use strict";var g={connected:function(){!n.hasClass(this.$el,this.$name)&&n.addClass(this.$el,this.$name)}},$={slide:{show:function(t){return[{transform:h(t*-100)},{transform:h()}]},percent:function(t){return p(t)},translate:function(t,e){return[{transform:h(e*-100*t)},{transform:h(e*100*(1-t))}]}}};function p(t){return Math.abs(n.css(t,"transform").split(",")[4]/t.offsetWidth)||0}function h(t,e){return t===void 0&&(t=0),e===void 0&&(e="%"),t+=t?e:"",n.isIE?"translateX("+t+")":"translate3d("+t+", 0, 0)"}function b(t){return"scale3d("+t+", "+t+", 1)"}function z(t,e,s,a){var i=a.animation,x=a.easing,o=i.percent,v=i.translate,r=i.show;r===void 0&&(r=n.noop);var c=r(s),u=new n.Deferred;return{dir:s,show:function(d,f,m){var w=this;f===void 0&&(f=0);var l=m?"linear":x;return d-=Math.round(d*n.clamp(f,-1,1)),this.translate(f),I(e,"itemin",{percent:f,duration:d,timing:l,dir:s}),I(t,"itemout",{percent:1-f,duration:d,timing:l,dir:s}),n.Promise.all([n.Transition.start(e,c[1],d,l),n.Transition.start(t,c[0],d,l)]).then(function(){w.reset(),u.resolve()},n.noop),u.promise},cancel:function(){n.Transition.cancel([e,t])},reset:function(){for(var d in c[0])n.css([e,t],d,"")},forward:function(d,f){return f===void 0&&(f=this.percent()),n.Transition.cancel([e,t]),this.show(d,f,!0)},translate:function(d){this.reset();var f=v(d,s);n.css(e,f[1]),n.css(t,f[0]),I(e,"itemtranslatein",{percent:d,dir:s}),I(t,"itemtranslateout",{percent:1-d,dir:s})},percent:function(){return o(t||e,e,s)},getDistance:function(){return t&&t.offsetWidth}}}function I(t,e,s){n.trigger(t,n.createEvent(e,!1,!1,s))}var A={props:{autoplay:Boolean,autoplayInterval:Number,pauseOnHover:Boolean},data:{autoplay:!1,autoplayInterval:7e3,pauseOnHover:!0},connected:function(){this.autoplay&&this.startAutoplay()},disconnected:function(){this.stopAutoplay()},update:function(){n.attr(this.slides,"tabindex","-1")},events:[{name:"visibilitychange",el:function(){return document},filter:function(){return this.autoplay},handler:function(){document.hidden?this.stopAutoplay():this.startAutoplay()}}],methods:{startAutoplay:function(){var t=this;this.stopAutoplay(),this.interval=setInterval(function(){return(!t.draggable||!n.$(":focus",t.$el))&&(!t.pauseOnHover||!n.matches(t.$el,":hover"))&&!t.stack.length&&t.show("next")},this.autoplayInterval)},stopAutoplay:function(){this.interval&&clearInterval(this.interval)}}},_={props:{draggable:Boolean},data:{draggable:!0,threshold:10},created:function(){var t=this;["start","move","end"].forEach(function(e){var s=t[e];t[e]=function(a){var i=n.getEventPos(a).x*(n.isRtl?-1:1);t.prevPos=i!==t.pos?t.pos:t.prevPos,t.pos=i,s(a)}})},events:[{name:n.pointerDown,delegate:function(){return this.selSlides},handler:function(t){!this.draggable||!n.isTouch(t)&&N(t.target)||n.closest(t.target,n.selInput)||t.button>0||this.length<2||this.start(t)}},{name:"dragstart",handler:function(t){t.preventDefault()}}],methods:{start:function(){this.drag=this.pos,this._transitioner?(this.percent=this._transitioner.percent(),this.drag+=this._transitioner.getDistance()*this.percent*this.dir,this._transitioner.cancel(),this._transitioner.translate(this.percent),this.dragging=!0,this.stack=[]):this.prevIndex=this.index,n.on(document,n.pointerMove,this.move,{passive:!1}),n.on(document,n.pointerUp+" "+n.pointerCancel+" input",this.end,!0),n.css(this.list,"userSelect","none")},move:function(t){var e=this,s=this.pos-this.drag;if(!(s===0||this.prevPos===this.pos||!this.dragging&&Math.abs(s)<this.threshold)){n.css(this.list,"pointerEvents","none"),t.cancelable&&t.preventDefault(),this.dragging=!0,this.dir=s<0?1:-1;for(var a=this,i=a.slides,x=this,o=x.prevIndex,v=Math.abs(s),r=this.getIndex(o+this.dir,o),c=this._getDistance(o,r)||i[o].offsetWidth;r!==o&&v>c;)this.drag-=c*this.dir,o=r,v-=c,r=this.getIndex(o+this.dir,o),c=this._getDistance(o,r)||i[o].offsetWidth;this.percent=v/c;var u=i[o],d=i[r],f=this.index!==r,m=o===r,w;[this.index,this.prevIndex].filter(function(l){return!n.includes([r,o],l)}).forEach(function(l){n.trigger(i[l],"itemhidden",[e]),m&&(w=!0,e.prevIndex=o)}),(this.index===o&&this.prevIndex!==o||w)&&n.trigger(i[this.index],"itemshown",[this]),f&&(this.prevIndex=o,this.index=r,!m&&n.trigger(u,"beforeitemhide",[this]),n.trigger(d,"beforeitemshow",[this])),this._transitioner=this._translate(Math.abs(this.percent),u,!m&&d),f&&(!m&&n.trigger(u,"itemhide",[this]),n.trigger(d,"itemshow",[this]))}},end:function(){if(n.off(document,n.pointerMove,this.move,{passive:!1}),n.off(document,n.pointerUp+" "+n.pointerCancel+" input",this.end,!0),this.dragging)if(this.dragging=null,this.index===this.prevIndex)this.percent=1-this.percent,this.dir*=-1,this._show(!1,this.index,!0),this._transitioner=null;else{var t=(n.isRtl?this.dir*(n.isRtl?1:-1):this.dir)<0==this.prevPos>this.pos;this.index=t?this.index:this.prevIndex,t&&(this.percent=1-this.percent),this.show(this.dir>0&&!t||this.dir<0&&t?"next":"previous",!0)}n.css(this.list,{userSelect:"",pointerEvents:""}),this.drag=this.percent=null}}};function N(t){return!t.children.length&&t.childNodes.length}var S={data:{selNav:!1},computed:{nav:function(t,e){var s=t.selNav;return n.$(s,e)},selNavItem:function(t){var e=t.attrItem;return"["+e+"],[data-"+e+"]"},navItems:function(t,e){return n.$$(this.selNavItem,e)}},update:{write:function(){var t=this;this.nav&&this.length!==this.nav.children.length&&n.html(this.nav,this.slides.map(function(e,s){return"<li "+t.attrItem+'="'+s+'"><a href></a></li>'}).join("")),this.navItems.concat(this.nav).forEach(function(e){return e&&(e.hidden=!t.maxIndex)}),this.updateNav()},events:["resize"]},events:[{name:"click",delegate:function(){return this.selNavItem},handler:function(t){t.preventDefault(),this.show(n.data(t.current,this.attrItem))}},{name:"itemshow",handler:"updateNav"}],methods:{updateNav:function(){var t=this,e=this.getValidIndex();this.navItems.forEach(function(s){var a=n.data(s,t.attrItem);n.toggleClass(s,t.clsActive,n.toNumber(a)===e),n.toggleClass(s,"ykuk-invisible",t.finite&&(a==="previous"&&e===0||a==="next"&&e>=t.maxIndex))})}}},T={mixins:[A,_,S],props:{clsActivated:Boolean,easing:String,index:Number,finite:Boolean,velocity:Number,selSlides:String},data:function(){return{easing:"ease",finite:!1,velocity:1,index:0,prevIndex:-1,stack:[],percent:0,clsActive:"ykuk-active",clsActivated:!1,Transitioner:!1,transitionOptions:{}}},connected:function(){this.prevIndex=-1,this.index=this.getValidIndex(this.$props.index),this.stack=[]},disconnected:function(){n.removeClass(this.slides,this.clsActive)},computed:{duration:function(t,e){var s=t.velocity;return H(e.offsetWidth/s)},list:function(t,e){var s=t.selList;return n.$(s,e)},maxIndex:function(){return this.length-1},selSlides:function(t){var e=t.selList,s=t.selSlides;return e+" "+(s||"> *")},slides:{get:function(){return n.$$(this.selSlides,this.$el)},watch:function(){this.$reset()}},length:function(){return this.slides.length}},events:{itemshown:function(){this.$update(this.list)}},methods:{show:function(t,e){var s=this;if(e===void 0&&(e=!1),!(this.dragging||!this.length)){var a=this,i=a.stack,x=e?0:i.length,o=function(){i.splice(x,1),i.length&&s.show(i.shift(),!0)};if(i[e?"unshift":"push"](t),!e&&i.length>1){i.length===2&&this._transitioner.forward(Math.min(this.duration,200));return}var v=this.getIndex(this.index),r=n.hasClass(this.slides,this.clsActive)&&this.slides[v],c=this.getIndex(t,this.index),u=this.slides[c];if(r===u){o();return}if(this.dir=D(t,v),this.prevIndex=v,this.index=c,r&&!n.trigger(r,"beforeitemhide",[this])||!n.trigger(u,"beforeitemshow",[this,r])){this.index=this.prevIndex,o();return}var d=this._show(r,u,e).then(function(){return r&&n.trigger(r,"itemhidden",[s]),n.trigger(u,"itemshown",[s]),new n.Promise(function(f){n.fastdom.write(function(){i.shift(),i.length?s.show(i.shift(),!0):s._transitioner=null,f()})})});return r&&n.trigger(r,"itemhide",[this]),n.trigger(u,"itemshow",[this]),d}},getIndex:function(t,e){return t===void 0&&(t=this.index),e===void 0&&(e=this.index),n.clamp(n.getIndex(t,this.slides,e,this.finite),0,this.maxIndex)},getValidIndex:function(t,e){return t===void 0&&(t=this.index),e===void 0&&(e=this.prevIndex),this.getIndex(t,e)},_show:function(t,e,s){if(this._transitioner=this._getTransitioner(t,e,this.dir,n.assign({easing:s?e.offsetWidth<600?"cubic-bezier(0.25, 0.46, 0.45, 0.94)":"cubic-bezier(0.165, 0.84, 0.44, 1)":this.easing},this.transitionOptions)),!s&&!t)return this._translate(1),n.Promise.resolve();var a=this.stack,i=a.length;return this._transitioner[i>1?"forward":"show"](i>1?Math.min(this.duration,75+75/(i-1)):this.duration,this.percent)},_getDistance:function(t,e){return this._getTransitioner(t,t!==e&&e).getDistance()},_translate:function(t,e,s){e===void 0&&(e=this.prevIndex),s===void 0&&(s=this.index);var a=this._getTransitioner(e!==s?e:!1,s);return a.translate(t),a},_getTransitioner:function(t,e,s,a){return t===void 0&&(t=this.prevIndex),e===void 0&&(e=this.index),s===void 0&&(s=this.dir||1),a===void 0&&(a=this.transitionOptions),new this.Transitioner(n.isNumber(t)?this.slides[t]:t,n.isNumber(e)?this.slides[e]:e,s*(n.isRtl?-1:1),a)}}};function D(t,e){return t==="next"?1:t==="previous"||t<e?-1:1}function H(t){return .5*t+300}var M={mixins:[T],props:{animation:String},data:{animation:"slide",clsActivated:"ykuk-transition-active",Animations:$,Transitioner:z},computed:{animation:function(t){var e=t.animation,s=t.Animations;return n.assign(s[e]||s.slide,{name:e})},transitionOptions:function(){return{animation:this.animation}}},events:{"itemshow itemhide itemshown itemhidden":function(t){var e=t.target;this.$update(e)},beforeitemshow:function(t){var e=t.target;n.addClass(e,this.clsActive)},itemshown:function(t){var e=t.target;n.addClass(e,this.clsActivated)},itemhidden:function(t){var e=t.target;n.removeClass(e,this.clsActive,this.clsActivated)}}},C=n.assign({},$,{fade:{show:function(){return[{opacity:0,zIndex:0},{zIndex:-1}]},percent:function(t){return 1-n.css(t,"opacity")},translate:function(t){return[{opacity:1-t,zIndex:0},{zIndex:-1}]}},scale:{show:function(){return[{opacity:0,transform:b(1+.5),zIndex:0},{zIndex:-1}]},percent:function(t){return 1-n.css(t,"opacity")},translate:function(t){return[{opacity:1-t,transform:b(1+.5*t),zIndex:0},{zIndex:-1}]}},pull:{show:function(t){return t<0?[{transform:h(30),zIndex:-1},{transform:h(),zIndex:0}]:[{transform:h(-100),zIndex:0},{transform:h(),zIndex:-1}]},percent:function(t,e,s){return s<0?1-p(e):p(t)},translate:function(t,e){return e<0?[{transform:h(30*t),zIndex:-1},{transform:h(-100*(1-t)),zIndex:0}]:[{transform:h(-t*100),zIndex:0},{transform:h(30*(1-t)),zIndex:-1}]}},push:{show:function(t){return t<0?[{transform:h(100),zIndex:0},{transform:h(),zIndex:-1}]:[{transform:h(-30),zIndex:-1},{transform:h(),zIndex:0}]},percent:function(t,e,s){return s>0?1-p(e):p(t)},translate:function(t,e){return e<0?[{transform:h(t*100),zIndex:0},{transform:h(-30*(1-t)),zIndex:-1}]:[{transform:h(-30*t),zIndex:-1},{transform:h(100*(1-t)),zIndex:0}]}}}),E={update:{write:function(){if(!(this.stack.length||this.dragging)){var t=this.getValidIndex(this.index);(!~this.prevIndex||this.index!==t)&&this.show(t)}},events:["resize"]}},y={mixins:[g,M,E],props:{ratio:String,minHeight:Number,maxHeight:Number},data:{ratio:"16:9",minHeight:!1,maxHeight:!1,selList:".ykuk-slideshow-items",attrItem:"ykuk-slideshow-item",selNav:".ykuk-slideshow-nav",Animations:C},update:{read:function(){var t=this.ratio.split(":").map(Number),e=t[0],s=t[1];return s=s*this.list.offsetWidth/e||0,this.minHeight&&(s=Math.max(this.minHeight,s)),this.maxHeight&&(s=Math.min(this.maxHeight,s)),{height:s-n.boxModelAdjust(this.list,"height","content-box")}},write:function(t){var e=t.height;e>0&&n.css(this.list,"minHeight",e)},events:["resize"]}};return typeof window!="undefined"&&window.ykukUIkit&&window.ykukUIkit.component("slideshow",y),y});

jQuery(document).ready(function(a){a(".we-ls-datepicker, .we-ls-datepicker-plain").each(function(){let b=a(this),c=b.hasClass("ws-ls-dob-field"),d=!0===c?"-100:-1":"-100:+0";!1===c&&b.hasClass("we-ls-challenge-datepicker")&&(d=!0===c?"-100:-1":"-100:+100");let e={changeMonth:!0,changeYear:!0,yearRange:d,dateFormat:ws_ls_config["date-format"],showButtonPanel:!0,closeText:ws_ls_config["date-picker-locale"].closeText,currentText:ws_ls_config["date-picker-locale"].currentText,monthNames:ws_ls_config["date-picker-locale"].monthNames,monthNamesShort:ws_ls_config["date-picker-locale"].monthNamesShort,dayNames:ws_ls_config["date-picker-locale"].dayNames,dayNamesShort:ws_ls_config["date-picker-locale"].dayNamesShort,dayNamesMin:ws_ls_config["date-picker-locale"].dayNamesMin,firstDay:ws_ls_config["date-picker-locale"].firstDay,onSelect:function(b){"1"!==ws_ls_config["form-load-previous"]||ws_ls_entry_post_data("ws_ls_get_entry_for_date",{"user-id":ws_ls_config["user-id"],date:b,"form-key":a(this).closest("form").data("form-key")},function(b,c){if(a(".ws-ls-previous-entry-notice").addClass("ws-ls-hide"),null!==c){if(!0!==confirm(ws_ls_config["date-picker-locale"]["entry-found"]))return;let a=ws_ls_config["load-entry-url"];window.location.href=a.replace("{entry-id}",c.id)+"#"+b["form-key"]}})}};!0===c&&(e.defaultDate=new Date(90,0,1)),a(this).datepicker(e)}),a.validator.addMethod("filesize",function(a,b,c){return this.optional(b)||b.files[0].size<=c}),a(".ws-ls-photo-field-delete").change(function(){if("y"===a(this).data("required")){var b="#"+a(this).data("field-id");!0===a(this).is(":checked")?a(b).attr("required","required"):(a(b).removeAttr("required"),a(b).removeClass("ws-ls-invalid"))}}),a(".we-ls-weight-form-validate").each(function(){let b=a(this).attr("id"),c=a(this).data("form-type"),d="target"===c,e=a(this).data("metric-unit"),f=a(this).hasClass("weight-required");if(window.console&&console.log(" Adding form validation to: "+b+". Form Type: "+c+". Target form? "+d+". Weight Unit: "+e),a("#"+b).validate({errorContainer:"#"+b+" .ws-ls-error-summary",errorLabelContainer:"#"+b+" .ws-ls-error-summary ul",wrapper:"li",ignore:[],errorClass:"ws-ls-invalid",validClass:"ws-ls-valid",messages:{"we-ls-date":ws_ls_config["validation-we-ls-date"],"ws-ls-weight-pounds":ws_ls_config["validation-we-ls-weight-pounds"],"ws-ls-weight-kg":ws_ls_config["validation-we-ls-weight-kg"],"ws-ls-weight-stones":ws_ls_config["validation-we-ls-weight-stones"]},submitHandler:function(b){a(".ws-ls-remove-on-submit").remove(),a(".ws-ls-form-processing-throbber").removeClass("ws-ls-hide"),b.submit()}}),!1===d&&a("#"+b+" .we-ls-datepicker").length){let c={required:!0};"true"===ws_ls_config["us-date"]?c.date=!0:c.dateITA=!0,a("#"+b+" .we-ls-datepicker").rules("add",c)}if("weight"===c&&!0===f){let c={required:!d,number:!0,range:[0,5e3]};"pounds_only"===e?a("#"+b+" .ws-ls-weight-pounds").rules("add",c):"stones_pounds"===e?(a("#"+b+" .ws-ls-weight-stones").rules("add",c),c.range=[0,14],a("#"+b+" .ws-ls-weight-pounds").rules("add",c)):a("#"+b+" .ws-ls-weight-kg").rules("add",c)}}),a(".we-ls-weight-form").on("click",".ws-ls-cancel-form",function(b){b.preventDefault();let c=a(this),d=c.data("form-id");if(void 0!==d){let b=a("#"+d+" #redirect-url").val();void 0===b||(window.location.href=b.replace("ws-edit-saved","ws-edit-cancel"))}})});function ws_ls_entry_post_data(a,b,c){b.action=a,b.security=ws_ls_config["ajax-security-nonce"],jQuery.post(ws_ls_config["ajax-url"],b,function(a){c(b,a)})}

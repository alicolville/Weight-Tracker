jQuery(document).ready(function(a){function b(){let b=[0,1,2,3,4,5,6,7],c=a("#field_type").val();for($i=0;$i<b.length;$i++)c!==b[$i]&&a(".ws-ls-meta-fields-additional-"+b[$i]).addClass("ws-ls-hide");for($i=0;$i<b.length;$i++)c==b[$i]&&a(".ws-ls-meta-fields-additional-"+b[$i]).removeClass("ws-ls-hide")}function c(){var b=["bmi","bmi-equals","weight","weight-percentage","weight-target"],c=a("#category").val();for($i=0;$i<b.length;$i++)c==b[$i]?(a("#ws-ls-awards-additional-"+b[$i]).removeClass("ws-ls-hide"),a(".hide-"+b[$i]).addClass("ws-ls-hide")):(a("#ws-ls-awards-additional-"+b[$i]).addClass("ws-ls-hide"),a(".hide-"+b[$i]).removeClass("ws-ls-hide"))}function d(){let b=a("#ws-ls-export-new-form #date-range").val();"custom"===b?a("#ws-ls-date-range-options").removeClass("ws-ls-hide"):a("#ws-ls-date-range-options").addClass("ws-ls-hide")}function e(){if(0===a(".ws-ls-export-progress-bar").length)return;let b={action:"process_export",security:ws_ls_security["ajax-security-nonce"],id:a(".ws-ls-export-progress-bar").data("export-id")};jQuery.post(ajaxurl,b,function(a){f(b,a)})}function f(b,c){if(!0===c.error)return void a("#ws-ls-export-message").text(c.message);if(a(".ws-ls-export-progress-bar-inner").css("width",c.percentage+"%"),""!=c.message){let b=c.message;a("#ws-ls-export-message").html(b)}!0===c["continue"]&&e()}function g(a,b,c){let d={action:"postboxes_event",security:ws_ls_security["ajax-security-nonce"],id:a,key:b,value:c};jQuery.post(ajaxurl,d,function(){})}function h(b){let c=[];return a("#"+b+" .ws-ls-postbox").each(function(){c.push(this.id)}),c}function i(a,b){let c=document.getElementById(a),d=document.getElementById(b),e=d.parentNode,f=d.nextSibling;f===c?e.insertBefore(c,d):(c.parentNode.insertBefore(d,c),f?e.insertBefore(c,f):e.appendChild(c))}a.fn.zozoTabs&&a("#ws-ls-tabs").zozoTabs({rounded:!1,multiline:!0,theme:"silver",size:"medium",responsive:!0,animation:{effects:"slideH",easing:"easeInOutCirc",type:"jquery"}}),a(".ws-ls-macro").focus(function(){prev_val=a(this).val()}).change(function(){event.preventDefault();let b=a(this).data("type"),c=0;a(".ws-ls-macro-"+b).each(function(){c+=parseInt(this.value)}),(100<c||0>c)&&(a(this).val(prev_val),alert("Please ensure the total of the Macronutrient fields is greater than 0% and less than 100% "))}),a(".ws-ls-macro-meals").focus(function(){prev_val=a(this).val()}).change(function(){event.preventDefault();var b=0;a(".ws-ls-macro-meals").each(function(){b+=parseInt(this.value)}),(100<b||0>b)&&(a(this).val(prev_val),alert("Please ensure the total of the Macronutrient Meals fields is greater than 0% and less than 100% "))}),a(".ws-ls-disabled input").prop("disabled",!0),a(".ws-ls-disabled select").prop("disabled",!0),a(".ws-ls-update-notice").on("click",".notice-dismiss",function(b){b.preventDefault();!1==a(this).parent().hasClass("ws-ls-update-notice")||a.post(ajaxurl,{action:"ws_ls_dismiss_notice",url:ajaxurl,security:a(this).parent().data("nonce"),update_key:a(this).parent().data("update-key")})});var j=document.querySelectorAll(".ws-ls-input-file");Array.prototype.forEach.call(j,function(a){var b=a.nextElementSibling,c=b.innerHTML;a.addEventListener("change",function(a){var d=a.target.value.split("\\").pop();d?b.querySelector("span").innerHTML=d:b.innerHTML=c}),a.addEventListener("focus",function(){a.classList.add("has-focus")}),a.addEventListener("blur",function(){a.classList.remove("has-focus")})}),a("#field_type").change(function(){b()}),b(),a(".ws-ls-radio-button-options-show-more").on("click",function(b){b.preventDefault(),a(".ws-ls-radio-button-options-table tr").removeClass("ws-ls-hide"),a(this).hide()}),a("#ws-ls-awards-form #category").change(function(){c()}),c(),a(".notice.is-dismissible").on("click",".notice-dismiss",function(b){b.preventDefault();!1==a(this).parent().hasClass("setup-wizard-dismiss")||a.post(ajaxurl,{action:"setup_wizard_dismiss",url:ajaxurl,security:a(this).parent().data("nonce")})}),a(".ws-ls-calorie-subtract-ranges-show-more").on("click",function(b){b.preventDefault(),a(".ws-ls-calorie-subtract-ranges-rows").show(),a(".ws-ls-calorie-subtract-ranges-show-more").hide()}),a(".ws-ls-calorie-add-ranges-show-more").on("click",function(b){b.preventDefault(),a(".ws-ls-calorie-add-ranges-rows").show(),a(".ws-ls-calorie-add-ranges-show-more").hide()}),a("#ws-ls-export-new-form #date-range").change(function(){d()}),d(),a(".ws-ls-export-check-all").on("click",function(b){b.preventDefault(),a(".report-column").prop("checked",!0)}),a(".ws-ls-export-uncheck-all").on("click",function(b){b.preventDefault(),a(".report-column").prop("checked",!1)}),e(),a(".ws-ls-postbox .handlediv").on("click",function(b){b.preventDefault();let c=a(this).data("postbox-id"),d=a("#"+c);d.toggleClass("closed");let e=d.hasClass("closed")?0:1;g(c,"display",e)}),a(".ws-ls-postbox-higher, .ws-ls-postbox-lower").click(function(b){b.preventDefault();let c=a(this).data("postbox-col"),d=h(c),e=a(this).data("postbox-id"),f=d.indexOf(e),j=a(this).hasClass("ws-ls-postbox-higher");if(!0===j&&0<f||!1===j&&f<d.length){let b=a("#"+c+" .ws-ls-postbox"),d=!0===j?f-1:f+1;i(a(b[f]).attr("id"),a(b[d]).attr("id")),g("order",c,h(c))}})});
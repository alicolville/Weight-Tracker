function ws_ls_log(e){window.console&&console.log(e)}jQuery(document).ready(function(i,s){function n(e,t,l){(a={}).action=e,a.security=ws_user_table_config.security;var a=obj3=i.extend(a,t),o="undefined"==typeof ajaxurl&&s!==ws_user_table_config["ajax-url"]?ws_user_table_config["ajax-url"]:ajaxurl;i.post(o,a,function(e,t){l&&l(e,t)})}function l(e,t){var l="#errors-list";console.log(e);var a=u(e.columns),o=e.rows;i(l).removeClass("ws-ls-loading-table"),i(l).footable({columns:a,rows:o,state:{enabled:!0,key:"ws-ls-admin-footable"}}),i(l+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===o.length&&i(l+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function a(e,t){var l="#"+e.table_id,a=u(e.columns),o=e.rows;i(l).removeClass("ws-ls-loading-table"),i(l).footable({columns:a,rows:o,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,allowAdd:!0,alwaysShow:!0,addText:ws_user_table_config["label-add"],deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(i.isNumeric(t.id)){var l={};l.id=t.id,e.delete(),n("groups_delete",l,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();window.location.href=ws_user_table_config["base-url"]+"&mode=groups&id="+t.id}}}),i(l+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===o.length&&i(l+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function o(e,t){var l="#"+e.table_id,a=u(e.columns),o=e.rows;i(l).removeClass("ws-ls-loading-table"),i(l).footable({columns:a,rows:o,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,allowAdd:!0,alwaysShow:!0,addText:ws_user_table_config["label-add"],deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(console.log(t.id),i.isNumeric(t.id)){var l={};l.id=t.id,e.delete(),n("groups_users_delete",l,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}}}}),i(l+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===o.length&&i(l+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function r(e,t){var l="#meta-fields-list",a=u(e.columns),o=e.rows;i(l).removeClass("ws-ls-loading-table"),i(l).footable({columns:a,rows:o,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-meta-fields-add-button"],deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(i.isNumeric(t.id)){var l={};l.id=t.id,e.delete(),n("meta_fields_delete",l,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit&id="+t.id},addRow:function(){window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit"}}}),i(l+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===o.length&&i(l+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function d(e,t){var l="#awards-list",a=u(e.columns),o=e.rows;i(l).removeClass("ws-ls-loading-table"),i(l).footable({columns:a,rows:o,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-awards-add-button"],deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(i.isNumeric(t.id)){var l={};l.id=t.id,e.delete(),n("awards_delete",l,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();window.location.href=ws_user_table_config["base-url-awards"]+"&mode=add-edit&id="+t.id},addRow:function(){window.location.href=ws_user_table_config["base-url-awards"]+"&mode=add-edit"}}}),i(l+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===o.length&&i(l+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function _(e,t){var l="#"+e.table_id,a={date:function(e){return"<b>DATE: "+e+"</b>"}},o=f()?2:3;e.columns[o].formatter=a.date;var s=u(e.columns),r=e.rows;i(l).removeClass("ws-ls-loading-table"),i(l).footable({columns:s,rows:r,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!1,deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(i.isNumeric(t.db_row_id)&&i.isNumeric(t.user_id)){var l={};l.row_id=t.db_row_id,l.user_id=t.user_id,e.delete(),n("delete_entry",l,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();if(!0===f()){var l=ws_user_table_config["edit-url"];l=l.replace("|ws-id|",t.db_row_id),window.location.href=l+"&user-id="+t.user_id+"&redirect="+ws_user_table_config["current-url-base64"]}else window.location.href=ws_user_table_config["base-url"]+"&mode=entry&user-id="+t.user_id+"&entry-id="+t.db_row_id+"&redirect="+ws_user_table_config["current-url-base64"]}}}),i(l+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===r.length&&i(l+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function u(e){if(void 0!==e&&e.length){var t={};t.date=c;for(var l=0;l<e.length;l++)void 0!==t[e[l].name]&&(ws_ls_log("Applying formatter for: "+e[l].name),e[l].formatter=t.date)}return e}function c(e){var t=e.split(" "),l=(t=new Date(t[0])).getDate(),a=t.getMonth()+1,o=t.getFullYear();return"false"==ws_user_table_config["us-date"]?l+"/"+a+"/"+o:a+"/"+l+"/"+o}function f(){return s!==ws_user_table_config["front-end"]&&"true"==ws_user_table_config["front-end"]}ws_ls_log("Processing user data tables.."),i(".ws-ls-footable").footable({}),i(".ws-ls-cancel-form").click(function(e){e.preventDefault();var t=i(this).data("form-id");if(s!==t){var l=i("#"+t+" #ws_redirect").val();s!==l&&(window.location.href=l.replace("ws-edit-saved","ws-edit-cancel"))}}),i(".ws-ls-user-data-ajax").each(function(){var e=i(this).attr("id"),t=i(this).data("user-id"),l=i(this).data("max-entries"),a=i(this).data("small-width");ws_ls_log("Setting up user data table: "+e);var o={};o.user_id=t,o.max_entries=l,o.small_width=a,o.table_id=e,o["front-end"]=f(),n("table_data",o,_)}),i(".ws-ls-meta-fields-list-ajax").each(function(){var e=i(this).attr("id");ws_ls_log("Setting up meta fields table: "+e);var t={};t.table_id=e,n("meta_fields_full_list",t,r)}),i(".ws-ls-awards-list-ajax").each(function(){var e=i(this).attr("id");ws_ls_log("Setting up awards table: "+e);var t={};t.table_id=e,n("awards_full_list",t,d)}),i(".ws-ls-errors-list-ajax").each(function(){var e=i(this).attr("id");ws_ls_log("Setting up meta fields table: "+e);var t={};t.table_id=e,n("get_errors",t,l)}),i(".ws-ls-settings-groups-list-ajax").each(function(){var e=i(this).attr("id");ws_ls_log("Setting up groups table: "+e);var t={};t.table_id=e,n("get_groups",t,a)}),i(".ws-ls-settings-groups-users-list-ajax").each(function(){var e=i(this).attr("id"),t=i(this).data("group-id");ws_ls_log("Setting up groups / users table: "+e);var l={};l.table_id=e,l.group_id=t,n("get_groups_users",l,o)})});
jQuery(document).ready(function(a){function b(b,c,d){e={},e.action=b,e.security=ws_user_table_config.security;var e=obj3=a.extend(e,c),f="undefined"==typeof ajaxurl&&void 0!==ws_user_table_config["ajax-url"]?ws_user_table_config["ajax-url"]:ajaxurl;a.post(f,e,function(a,b){d&&d(a,b)})}function c(b){var c=i(b.columns),d=b.rows;a("#errors-list").removeClass("ws-ls-loading-table"),a("#errors-list").footable({columns:c,rows:d,state:{enabled:!0,key:"ws-ls-admin-footable"}}),a("#errors-list .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===d.length&&a("#errors-list .footable-empty td").html(ws_user_table_config["locale-no-results"])}function d(c){var d="#"+c.table_id,e=i(c.columns),f=c.rows;a(d).removeClass("ws-ls-loading-table"),a(d).footable({columns:e,rows:f,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,allowAdd:!0,alwaysShow:!0,addText:ws_user_table_config["label-add"],deleteRow:function(c){if(confirm(ws_user_table_config["label-confirm-delete"])){var d=c.val();if(a.isNumeric(d.id)){var e={};e.id=d.id,c.delete(),b("groups_delete",e,function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(a){var b=a.val();window.location.href=ws_user_table_config["base-url"]+"&mode=groups&id="+b.id}}}),a(d+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===f.length&&a(d+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function e(c){var d="#"+c.table_id,e=i(c.columns),f=c.rows;a(d).removeClass("ws-ls-loading-table"),a(d).footable({columns:e,rows:f,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,allowAdd:!0,alwaysShow:!0,addText:ws_user_table_config["label-add"],deleteRow:function(c){if(confirm(ws_user_table_config["label-confirm-delete"])){var d=c.val();if(a.isNumeric(d.id)){var e={};e.id=d.id,c.delete(),b("groups_users_delete",e,function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])})}}}}}),a(d+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===f.length&&a(d+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function f(c){var d=i(c.columns),e=c.rows;a("#meta-fields-list").removeClass("ws-ls-loading-table"),a("#meta-fields-list").footable({columns:d,rows:e,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-meta-fields-add-button"],deleteRow:function(c){if(confirm(ws_user_table_config["label-confirm-delete"])){var d=c.val();if(a.isNumeric(d.id)){var e={};e.id=d.id,c.delete(),b("meta_fields_delete",e,function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(a){var b=a.val();window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit&id="+b.id},addRow:function(){window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit"}}}),a("#meta-fields-list .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===e.length&&a("#meta-fields-list .footable-empty td").html(ws_user_table_config["locale-no-results"])}function g(c){var d=i(c.columns),e=c.rows;a("#awards-list").removeClass("ws-ls-loading-table"),a("#awards-list").footable({columns:d,rows:e,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-awards-add-button"],deleteRow:function(c){if(confirm(ws_user_table_config["label-confirm-delete"])){var d=c.val();if(a.isNumeric(d.id)){var e={};e.id=d.id,c.delete(),b("awards_delete",e,function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(a){var b=a.val();window.location.href=ws_user_table_config["base-url-awards"]+"&mode=add-edit&id="+b.id},addRow:function(){window.location.href=ws_user_table_config["base-url-awards"]+"&mode=add-edit"}}}),a("#awards-list .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===e.length&&a("#awards-list .footable-empty td").html(ws_user_table_config["locale-no-results"])}function h(c){var d="#"+c.table_id,e={};e.date=function(a){return"<b>DATE: "+a+"</b>"};var f=k()?2:3;c.columns[f].formatter=e.date;var g=i(c.columns),h=c.rows;a(d).removeClass("ws-ls-loading-table"),a(d).footable({columns:g,rows:h,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!1,deleteRow:function(c){if(confirm(ws_user_table_config["label-confirm-delete"])){var d=c.val();if(a.isNumeric(d.db_row_id)&&a.isNumeric(d.user_id)){var e={};e.row_id=d.db_row_id,e.user_id=d.user_id,c.delete(),b("delete_entry",e,function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(a){var b=a.val();if(!0===k()){var c=ws_user_table_config["edit-url"];c=c.replace("|ws-id|",b.db_row_id),window.location.href=c+"&user-id="+b.user_id+"&redirect="+ws_user_table_config["current-url-base64"]}else window.location.href=ws_user_table_config["base-url"]+"&mode=entry&user-id="+b.user_id+"&entry-id="+b.db_row_id+"&redirect="+ws_user_table_config["current-url-base64"]}}}),a(d+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===h.length&&a(d+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function i(a){if("undefined"!=typeof a&&a.length)for(var b={date:j},c=0;c<a.length;c++)"undefined"!=typeof b[a[c].name]&&(ws_ls_log("Applying formatter for: "+a[c].name),a[c].formatter=b.date);return a}function j(a){"undefined"!=typeof moment&&a instanceof moment&&(a=a._i);var b=a.split(" ");b=new Date(b[0]);var c=b.getUTCDate(),d=b.getUTCMonth()+1,e=b.getUTCFullYear();return"false"==ws_user_table_config["us-date"]?c+"/"+d+"/"+e:d+"/"+c+"/"+e}function k(){return!(void 0===ws_user_table_config["front-end"]||"true"!=ws_user_table_config["front-end"])}ws_ls_log("Processing user data tables.."),a(".ws-ls-footable").footable({}),a(".ws-ls-cancel-form").click(function(b){b.preventDefault();var c=a(this),d=c.data("form-id");if(void 0!==d){var e=a("#"+d+" #ws_redirect").val();void 0!==e&&(window.location.href=e.replace("ws-edit-saved","ws-edit-cancel"))}}),a(".ws-ls-user-data-ajax").each(function(){var c=a(this).attr("id"),d=a(this).data("user-id"),e=a(this).data("max-entries"),f=a(this).data("small-width"),g=a(this).data("order-direction");ws_ls_log("Setting up user data table: "+c);var i={};i.user_id=d,i.max_entries=e,i.small_width=f,i.table_id=c,i["front-end"]=k(),i["order-direction"]=g,b("table_data",i,h)}),a(".ws-ls-meta-fields-list-ajax").each(function(){var c=a(this).attr("id");ws_ls_log("Setting up meta fields table: "+c);var d={};d.table_id=c,b("meta_fields_full_list",d,f)}),a(".ws-ls-awards-list-ajax").each(function(){var c=a(this).attr("id");ws_ls_log("Setting up awards table: "+c);var d={};d.table_id=c,b("awards_full_list",d,g)}),a(".ws-ls-errors-list-ajax").each(function(){var d=a(this).attr("id");ws_ls_log("Setting up meta fields table: "+d);var e={};e.table_id=d,b("get_errors",e,c)}),a(".ws-ls-settings-groups-list-ajax").each(function(){var c=a(this).attr("id");ws_ls_log("Setting up groups table: "+c);var e={};e.table_id=c,b("get_groups",e,d)}),a(".ws-ls-settings-groups-users-list-ajax").each(function(){var c=a(this).attr("id"),d=a(this).data("group-id");ws_ls_log("Setting up groups / users table: "+c);var f={};f.table_id=c,f.group_id=d,b("get_groups_users",f,e)})});function ws_ls_log(a){window.console&&console.log(a)}
function ws_ls_log(e){window.console&&console.log(e)}jQuery(document).ready(function(s,o){function n(e,t,a){(l={}).action=e,l.security=ws_user_table_config.security;var l=obj3=s.extend(l,t),r="undefined"==typeof ajaxurl&&o!==ws_user_table_config["ajax-url"]?ws_user_table_config["ajax-url"]:ajaxurl;s.post(r,l,function(e,t){a&&a(e,t)})}function a(e,t){var a="#meta-fields-list",l=d(e.columns),r=e.rows;s(a).removeClass("ws-ls-loading-table"),s(a).footable({columns:l,rows:r,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-meta-fields-add-button"],deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(s.isNumeric(t.id)){var a={};a.id=t.id,e.delete(),n("meta_fields_delete",a,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit&id="+t.id},addRow:function(){window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit"}}}),s(a+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===r.length&&s(a+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function i(e,t){var a="#"+e.table_id,l={date:function(e){return"<b>DATE: "+e+"</b>"}},r=_()?2:3;e.columns[r].formatter=l.date;var o=d(e.columns),i=e.rows;s(a).removeClass("ws-ls-loading-table"),s(a).footable({columns:o,rows:i,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!1,deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(s.isNumeric(t.db_row_id)&&s.isNumeric(t.user_id)){var a={};a.row_id=t.db_row_id,a.user_id=t.user_id,e.delete(),n("delete_entry",a,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();if(!0===_()){var a=ws_user_table_config["edit-url"];a=a.replace("|ws-id|",t.db_row_id),window.location.href=a+"&user-id="+t.user_id+"&redirect="+ws_user_table_config["current-url-base64"]}else window.location.href=ws_user_table_config["base-url"]+"&mode=entry&user-id="+t.user_id+"&entry-id="+t.db_row_id+"&redirect="+ws_user_table_config["current-url-base64"]}}}),s(a+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===i.length&&s(a+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function d(e){if(void 0!==e&&e.length){var t={};t.date=l;for(var a=0;a<e.length;a++)void 0!==t[e[a].name]&&(ws_ls_log("Applying formatter for: "+e[a].name),e[a].formatter=t.date)}return e}function l(e){var t=e.split(" "),a=(t=new Date(t[0])).getDate(),l=t.getMonth()+1,r=t.getFullYear();return"false"==ws_user_table_config["us-date"]?a+"/"+l+"/"+r:l+"/"+a+"/"+r}function _(){return o!==ws_user_table_config["front-end"]&&"true"==ws_user_table_config["front-end"]}ws_ls_log("Processing user data tables.."),s(".ws-ls-footable").footable({}),s(".ws-ls-cancel-form").click(function(e){e.preventDefault();var t=s(this).data("form-id");if(o!==t){var a=s("#"+t+" #ws_redirect").val();o!==a&&(window.location.href=a.replace("ws-edit-saved","ws-edit-cancel"))}}),s(".ws-ls-user-data-ajax").each(function(){var e=s(this).attr("id"),t=s(this).data("user-id"),a=s(this).data("max-entries"),l=s(this).data("small-width");ws_ls_log("Setting up user data table: "+e);var r={};r.user_id=t,r.max_entries=a,r.small_width=l,r.table_id=e,r["front-end"]=_(),n("table_data",r,i)}),s(".ws-ls-meta-fields-list-ajax").each(function(){var e=s(this).attr("id");ws_ls_log("Setting up meta fields table: "+e);var t={};t.table_id=e,n("meta_fields_full_list",t,a)})});
jQuery(document).ready(function(a){function b(b){let c="#"+b.table_id,d={},e=!0===l()?2:3;d.date=function(a){return"<b>DATE: "+a+"</b>"},b.columns[e].formatter=d.date,ws_ls_log("Weight Entries: Rendering Table: "+c);let f=j(b.columns),g=b.rows;a(c).removeClass("ws-ls-loading-table"),a(c).footable({columns:f,rows:g,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!1,deleteRow:function(b){if(!0===confirm(ws_user_table_config["label-confirm-delete"])){let c=b.val();!0===a.isNumeric(c.db_row_id)&&!0===a.isNumeric(c.user_id)&&(b.delete(),a(".ws-ls-show-if-data-edited").removeClass("ykuk-invisible"),i("delete_entry",{row_id:c.db_row_id,user_id:c.user_id},function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])}))}},editRow:function(b){let d=b.val();if(!0===l()&&"1"!==ws_user_table_config["is-admin"]){var e=ws_user_table_config["edit-url"];e=e.replace("|ws-id|",d.db_row_id),window.location.href=e+"&user-id="+d.user_id+"&redirect="+ws_user_table_config["current-url-base64"]+"#"+a(c).data("jump-to")}else window.location.href=ws_user_table_config["base-url"]+"&mode=entry&user-id="+d.user_id+"&entry-id="+d.db_row_id+"&redirect="+ws_user_table_config["current-url-base64"]}}}),a(c+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===g.length&&a(c+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function c(b){let c=j(b.columns),d=b.rows;ws_ls_log("Meta Fields: Rendering Table: #meta-fields-list"),a("#meta-fields-list").removeClass("ws-ls-loading-table"),a("#meta-fields-list").footable({columns:c,rows:d,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-meta-fields-add-button"],deleteRow:function(b){if(!0===confirm(ws_user_table_config["label-confirm-delete"])){let c=b.val();!0===a.isNumeric(c.id)&&(b.delete(),i("meta_fields_delete",{id:c.id},function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])}))}},editRow:function(a){let b=a.val();window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit&id="+b.id},addRow:function(){window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit"}}}),a("#meta-fields-list .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===d.length&&a("#meta-fields-list .footable-empty td").html(ws_user_table_config["locale-no-results"])}function d(b){let c=j(b.columns),d=b.rows;ws_ls_log("Awards: Rendering Table: #awards-list"),a("#awards-list").removeClass("ws-ls-loading-table"),a("#awards-list").footable({columns:c,rows:d,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-awards-add-button"],deleteRow:function(b){if(!0===confirm(ws_user_table_config["label-confirm-delete"])){let c=b.val();!0===a.isNumeric(c.id)&&(b.delete(),i("awards_delete",{id:c.id},function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])}))}},editRow:function(a){let b=a.val();window.location.href=ws_user_table_config["base-url-awards"]+"&mode=add-edit&id="+b.id},addRow:function(){window.location.href=ws_user_table_config["base-url-awards"]+"&mode=add-edit"}}}),a("#awards-list .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===d.length&&a("#awards-list .footable-empty td").html(ws_user_table_config["locale-no-results"])}function e(b){let c=j(b.columns),d=b.rows;ws_ls_log("Errors: Rendering Table: #errors-list"),a("#errors-list").removeClass("ws-ls-loading-table"),a("#errors-list").footable({columns:c,rows:d,state:{enabled:!0,key:"ws-ls-admin-footable"}}),a("#errors-list .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===d.length&&a("#errors-list .footable-empty td").html(ws_user_table_config["locale-no-results"])}function f(b){let c="#"+b.table_id,d=j(b.columns),e=b.rows;ws_ls_log("Groups: Rendering Table: "+c),a(c).removeClass("ws-ls-loading-table"),a(c).footable({columns:d,rows:e,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,allowAdd:!0,alwaysShow:!0,addText:ws_user_table_config["label-add"],deleteRow:function(b){if(!0===confirm(ws_user_table_config["label-confirm-delete"])){let c=b.val();!0===a.isNumeric(c.id)&&(b.delete(),i("groups_delete",{id:c.id},function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])}))}},editRow:function(a){let b=a.val();window.location.href=ws_user_table_config["base-url"]+"&mode=groups&id="+b.id}}}),a(c+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===e.length&&a(c+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function g(b){let c="#"+b.table_id,d=j(b.columns),e=b.rows;ws_ls_log("Groups: Rendering Table: "+c),a(c).removeClass("ws-ls-loading-table"),a(c).footable({columns:d,rows:e,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,allowAdd:!0,alwaysShow:!0,addText:ws_user_table_config["label-add"],deleteRow:function(b){if(!0===confirm(ws_user_table_config["label-confirm-delete"])){let c=b.val();!0===a.isNumeric(c.id)&&(b.delete(),i("custom_field_groups_delete",{id:c.id},function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])}))}}}}),a(c+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===e.length&&a(c+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function h(b){let c="#"+b.table_id,d=j(b.columns),e=b.rows;a(".ws-ls-total-lost-count span").html(b.total_difference),a(".ws-ls-total-lost-count").removeClass("ykuk-invisible"),a(".ws-ls-total-losses-count span").html(b.total_losses),a(".ws-ls-total-losses-count").removeClass("ykuk-invisible"),a(".ws-ls-total-gains-count span").html(b.total_gains),a(".ws-ls-total-gains-count").removeClass("ykuk-invisible"),ws_ls_log("Groups: Rendering Table: "+c),a(c).removeClass("ws-ls-loading-table"),a(c).footable({columns:d,rows:e,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,allowAdd:!0,alwaysShow:!0,addText:ws_user_table_config["label-add"],deleteRow:function(b){if(!0===confirm(ws_user_table_config["label-confirm-delete"])){let c=b.val();!0===a.isNumeric(c.id)&&(b.delete(),i("groups_users_delete",{id:c.id},function(a){1!==a&&alert(ws_user_table_config["label-error-delete"])}))}}}}),a(c+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===e.length&&a(c+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function i(b,c,d){c.action=b,c.security=ws_user_table_config.security;let e="undefined"==typeof ajaxurl&&void 0!==ws_user_table_config["ajax-url"]?ws_user_table_config["ajax-url"]:ajaxurl;a.post(e,c,function(a,b){d&&d(a,b)})}function j(a){if("undefined"!=typeof a&&a.length){let b={date:k};for(let c=0;c<a.length;c++)"undefined"!=typeof b[a[c].name]&&(a[c].formatter=b.date)}return a}function k(a){"undefined"!=typeof moment&&a instanceof moment&&(a=a._i);let b=a.split(" ");b=new Date(b[0]);let c=b.getUTCDate(),d=b.getUTCMonth()+1,e=b.getUTCFullYear();return"false"===ws_user_table_config["us-date"]?c+"/"+d+"/"+e:d+"/"+c+"/"+e}function l(){return!(void 0===ws_user_table_config["front-end"]||"true"!=ws_user_table_config["front-end"])}ws_ls_log("Populating user data tables.."),a(".ws-ls-footable").footable({}),a(".ws-ls-user-data-ajax").each(function(){let c=a(this).attr("id");ws_ls_log("Weight Entries: Fetching Data: "+c);let d={"enable-bmi":a(this).data("enable-bmi"),"enable-notes":a(this).data("enable-notes"),"enable-weight":a(this).data("enable-weight"),"enable-meta-fields":a(this).data("enable-meta-fields"),"custom-field-restrict-rows":a(this).data("custom-field-restrict-rows"),"custom-field-groups":a(this).data("custom-field-groups"),"custom-field-slugs":a(this).data("custom-field-slugs"),"custom-field-col-size":a(this).data("custom-field-col-size"),"front-end":l(),"is-admin":ws_user_table_config["is-admin"],max_entries:a(this).data("max-entries"),user_id:a(this).data("user-id"),small_width:a(this).data("small-width"),table_id:c,week:a(this).data("week"),"bmi-format":a(this).data("bmi-format"),uikit:a(this).data("uikit"),name:a(this).data("name")};i("table_data",d,b)}),a(".ws-ls-meta-fields-list-ajax").each(function(){let b=a(this).attr("id");ws_ls_log("Meta Fields: Fetching Data: "+b),i("meta_fields_full_list",{table_id:b},c)}),a(".ws-ls-awards-list-ajax").each(function(){let b=a(this).attr("id");ws_ls_log("Awards: Fetching Data: "+b),i("awards_full_list",{table_id:b},d)}),a(".ws-ls-errors-list-ajax").each(function(){let b=a(this).attr("id");ws_ls_log("Errors: Fetching Data: "+b),i("get_errors",{table_id:b},e)}),a(".ws-ls-settings-groups-list-ajax").each(function(){let b=a(this).attr("id");ws_ls_log("Groups: Fetching Data: "+b),i("get_groups",{table_id:b},f)}),a(".ws-ls-settings-custom-field-groups-list-ajax").each(function(){let b=a(this).attr("id");ws_ls_log("Custom Fields Groups: Fetching Data: "+b),i("get_custom_field_groups",{table_id:b},g)}),a(".ws-ls-settings-groups-users-list-ajax").each(function(){ws_ls_log("Users: Fetching Data");let b={table_id:a(this).attr("id"),group_id:a(this).data("group-id"),todays_entries_only:a(this).data("todays-entries-only"),"is-admin":a(this).data("is-admin"),hide_column_gains:a(this).data("hide-column-gains"),hide_column_losses:a(this).data("hide-column-losses"),hide_column_diff_from_prev:a(this).data("hide-column-diff-from-prev"),hide_summary_row:a(this).data("hide-summary-row")};i("get_groups_users",b,h)})});function ws_ls_log(a){window.console&&console.log(a)}
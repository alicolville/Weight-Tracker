function ws_ls_log(e){window.console&&console.log(e)}jQuery(document).ready(function(i,r){function n(e,t,a){(l={}).action=e,l.security=ws_user_table_config.security;var l=obj3=i.extend(l,t),o="undefined"==typeof ajaxurl&&r!==ws_user_table_config["ajax-url"]?ws_user_table_config["ajax-url"]:ajaxurl;i.post(o,l,function(e,t){a&&a(e,t)})}function a(e,t){var a="#errors-list";console.log(e);var l=d(e.columns),o=e.rows;i(a).removeClass("ws-ls-loading-table"),i(a).footable({columns:l,rows:o,state:{enabled:!0,key:"ws-ls-admin-footable"}}),i(a+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===o.length&&i(a+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function l(e,t){var a="#meta-fields-list",l=d(e.columns),o=e.rows;i(a).removeClass("ws-ls-loading-table"),i(a).footable({columns:l,rows:o,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!0,addText:ws_user_table_config["label-meta-fields-add-button"],deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(i.isNumeric(t.id)){var a={};a.id=t.id,e.delete(),n("meta_fields_delete",a,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit&id="+t.id},addRow:function(){window.location.href=ws_user_table_config["base-url-meta-fields"]+"&mode=add-edit"}}}),i(a+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===o.length&&i(a+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function s(e,t){var a="#"+e.table_id,l={date:function(e){return"<b>DATE: "+e+"</b>"}},o=_()?2:3;e.columns[o].formatter=l.date;var r=d(e.columns),s=e.rows;i(a).removeClass("ws-ls-loading-table"),i(a).footable({columns:r,rows:s,state:{enabled:!0,key:"ws-ls-admin-footable"},editing:{enabled:!0,alwaysShow:!0,allowAdd:!1,deleteRow:function(e){if(confirm(ws_user_table_config["label-confirm-delete"])){var t=e.val();if(i.isNumeric(t.db_row_id)&&i.isNumeric(t.user_id)){var a={};a.row_id=t.db_row_id,a.user_id=t.user_id,e.delete(),n("delete_entry",a,function(e,t){1!==e&&alert(ws_user_table_config["label-error-delete"])})}}},editRow:function(e){var t=e.val();if(!0===_()){var a=ws_user_table_config["edit-url"];a=a.replace("|ws-id|",t.db_row_id),window.location.href=a+"&user-id="+t.user_id+"&redirect="+ws_user_table_config["current-url-base64"]}else window.location.href=ws_user_table_config["base-url"]+"&mode=entry&user-id="+t.user_id+"&entry-id="+t.db_row_id+"&redirect="+ws_user_table_config["current-url-base64"]}}}),i(a+" .footable-filtering-search .input-group .form-control").attr("placeholder",ws_user_table_config["locale-search-text"]),0===s.length&&i(a+" .footable-empty td").html(ws_user_table_config["locale-no-results"])}function d(e){if(void 0!==e&&e.length){var t={};t.date=o;for(var a=0;a<e.length;a++)void 0!==t[e[a].name]&&(ws_ls_log("Applying formatter for: "+e[a].name),e[a].formatter=t.date)}return e}function o(e){var t=e.split(" "),a=(t=new Date(t[0])).getDate(),l=t.getMonth()+1,o=t.getFullYear();return"false"==ws_user_table_config["us-date"]?a+"/"+l+"/"+o:l+"/"+a+"/"+o}function _(){return r!==ws_user_table_config["front-end"]&&"true"==ws_user_table_config["front-end"]}ws_ls_log("Processing user data tables.."),i(".ws-ls-footable").footable({}),i(".ws-ls-cancel-form").click(function(e){e.preventDefault();var t=i(this).data("form-id");if(r!==t){var a=i("#"+t+" #ws_redirect").val();r!==a&&(window.location.href=a.replace("ws-edit-saved","ws-edit-cancel"))}}),i(".ws-ls-user-data-ajax").each(function(){var e=i(this).attr("id"),t=i(this).data("user-id"),a=i(this).data("max-entries"),l=i(this).data("small-width");ws_ls_log("Setting up user data table: "+e);var o={};o.user_id=t,o.max_entries=a,o.small_width=l,o.table_id=e,o["front-end"]=_(),n("table_data",o,s)}),i(".ws-ls-meta-fields-list-ajax").each(function(){var e=i(this).attr("id");ws_ls_log("Setting up meta fields table: "+e);var t={};t.table_id=e,n("meta_fields_full_list",t,l)}),i(".ws-ls-errors-list-ajax").each(function(){var e=i(this).attr("id");ws_ls_log("Setting up meta fields table: "+e);var t={};t.table_id=e,n("get_errors",t,a)})});
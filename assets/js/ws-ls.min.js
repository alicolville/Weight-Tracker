function ws_ls_post_data(s,r){var e=ws_ls_config["ajax-url"];jQuery.post(e,s,function(e){e=JSON.parse(e);r(s,e)})}function ws_ls_user_preference_callback(e,s){if(1==s){var r=jQuery(".ws-ls-user-pref-form").data("redirect-url");r?window.location.replace(r):window.location.replace(ws_ls_config["current-url"]+"?user-preference-saved=true")}else console.log("Error saving the user preferences")}function ws_ls_get_querystring_value(e){for(var s=window.location.search.substring(1).split("&"),r=0;r<s.length;r++){var a=s[r].split("=");if(a[0]==e)return a[1]}}$tabs_global=!1,jQuery(document).ready(function(l){function s(e,s){1==s?(l(".ws-ls-notice-of-refresh").removeClass("ws-ls-hide"),ws_ls_config["current-url"]&&window.location.replace(ws_ls_config["current-url"]+"?target-cleared=true")):console.log("Error clearing target :(",e,s)}l(".ws-ls-clear-target").click(function(e){e.preventDefault(),confirm(ws_ls_config["clear-target"])&&($post_data={action:"ws_ls_clear_target"},$post_data.security=ws_ls_config["ajax-security-nonce"],$post_data["user-id"]=ws_ls_config["user-id"],ws_ls_post_data($post_data,s))});var e="tab1";(ws_ls_get_querystring_value("ws-edit-saved")||ws_ls_get_querystring_value("ws-edit-cancel"))&&(e="tab2");if($tabs_global=l("#ws-ls-tabs").zozoTabs({rounded:!1,multiline:!0,theme:"silver",size:"small",minWindowWidth:3e3,responsive:!0,animation:{effects:"slideH",easing:"easeInOutCirc",type:"jquery"},defaultTab:e,ready:function(e,s){l("#ws-ls-tabs-loading").addClass("ws-ls-hide"),l("#"+s.id).addClass("ws-ls-force-show"),l("#"+s.id).removeClass("ws-ls-hide")}}),"true"==ws_ls_config["is-pro"]){l(".ws-ls-user-delete-all").validate({errorClass:"ws-ls-invalid",validClass:"ws-ls-valid",errorContainer:".ws-ls-user-delete-all .ws-ls-error-summary",errorLabelContainer:".ws-ls-user-delete-all .ws-ls-error-summary ul",wrapper:"li",messages:{"ws-ls-delete-all":ws_ls_config["validation-we-ls-history"]},submitHandler:function(e){e.submit()}}),l(".ws-ls-user-pref-form").submit(function(e){e.preventDefault(),"true"!=ws_ls_config["validation-about-you-mandatory"]&&r()});function r(){var e={};e.security=ws_ls_config["ajax-security-nonce"],e["user-id"]=ws_ls_config["user-id"],l(".ws-ls-user-pref-form select, .ws-ls-user-pref-form .custom-field").each(function(){e[l(this).attr("id")]=l(this).val()}),e.action="ws_ls_save_preferences",e["ws-ls-dob"]=l("#ws-ls-dob").val(),ws_ls_post_data(e,ws_ls_user_preference_callback)}"true"==ws_ls_config["validation-about-you-mandatory"]&&(l(".ws-ls-user-pref-form").validate({errorClass:"ws-ls-invalid",validClass:"ws-ls-valid",errorContainer:".ws-ls-user-pref-form .ws-ls-error-summary",errorLabelContainer:".ws-ls-user-pref-form .ws-ls-error-summary ul",wrapper:"li",rules:ws_ls_config["validation-user-pref-rules"],messages:ws_ls_config["validation-user-pref-messages"],submitHandler:function(e){r()}}),l.extend(jQuery.validator.messages,{required:ws_ls_config["validation-required"]}),l(".ws-ls-user-pref-form .we-ls-datepicker").length&&("true"==ws_ls_config["us-date"]?l(".ws-ls-user-pref-form .we-ls-datepicker").rules("add",{required:!0,date:!0}):l(".ws-ls-user-pref-form .we-ls-datepicker").rules("add",{required:!0,dateITA:!0})))}l(".ws-ls-reload-page-if-clicked").click(function(e){e.preventDefault(),window.location.replace(ws_ls_config["current-url"])}),l(".ws-ls-progress").each(function(){var e=l(this).attr("id"),s=l(this).data("progress"),r=l(this).data("type"),a={strokeWidth:l(this).data("stroke-width"),easing:"easeInOut",duration:l(this).data("animation-duration"),color:l(this).data("stroke-colour"),trailColor:l(this).data("trail-colour"),trailWidth:l(this).data("trail-width"),svgStyle:{width:l(this).data("width"),height:l(this).data("height")},text:{style:{color:l(this).data("text-colour")}},step:function(e,s,r){s.setText(Math.round(100*s.value())+"% "+l("#"+s._container.id).data("precentage-text"))}};if("circle"==r)var t=new ProgressBar.Circle("#"+e,a);else t=new ProgressBar.Line("#"+e,a);t.animate(s)});var a=document.querySelectorAll(".ws-ls-input-file");Array.prototype.forEach.call(a,function(e){var r=e.nextElementSibling,a=r.innerHTML;e.addEventListener("change",function(e){var s=e.target.value.split("\\").pop();s?r.querySelector("span").innerHTML=s:r.innerHTML=a}),e.addEventListener("focus",function(){e.classList.add("has-focus")}),e.addEventListener("blur",function(){e.classList.remove("has-focus")})})});

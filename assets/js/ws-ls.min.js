let tabs_global=!1;jQuery(document).ready(function(a){a(".ws-ls-clear-target").click(function(a){a.preventDefault(),!1===confirm(ws_ls_config["clear-target"])||ws_ls_post("ws_ls_clear_target",{"user-id":ws_ls_config["user-id"]},function(){window.location.replace(ws_ls_config["current-url"]+"?target-cleared=true")})});let b=ws_ls_querystring_value("ws-edit-saved")||ws_ls_querystring_value("ws-edit-cancel")?"tab2":"tab1";if(ws_ls_config["tab-config"].defaultTab=b,ws_ls_config["tab-config"].ready=function(b,c){a("#ws-ls-tabs-loading").addClass("ws-ls-hide"),a("#"+c.id).addClass("ws-ls-force-show"),a("#"+c.id).removeClass("ws-ls-hide")},tabs_global=a("#ws-ls-tabs").zozoTabs(ws_ls_config["tab-config"]),a(".ws-ls-progress").each(function(){let b="#"+a(this).attr("id"),c=a(this).data("progress"),d=a(this).data("percentage-text"),e={strokeWidth:a(this).data("stroke-width"),easing:"easeInOut",duration:a(this).data("animation-duration"),color:a(this).data("stroke-colour"),trailColor:a(this).data("trail-colour"),trailWidth:a(this).data("trail-width"),svgStyle:{width:a(this).data("width"),height:a(this).data("height")},text:{style:{color:a(this).data("text-colour")},value:Math.round(100*c)+"% "+d},step:function(a,b){b.setText(Math.round(100*b.value())+"% "+d)}},f=!1;f="circle"===a(this).data("type")?new ProgressBar.Circle(b,e):new ProgressBar.Line(b,e),f.animate(c)}),"true"===ws_ls_config["photos-enabled"]){let a=document.querySelectorAll(".ws-ls-input-file");Array.prototype.forEach.call(a,function(a){let b=a.nextElementSibling,c=b.innerHTML;a.addEventListener("change",function(a){let d=a.target.value.split("\\").pop();d?b.querySelector("span").innerHTML=d:b.innerHTML=c}),a.addEventListener("focus",function(){a.classList.add("has-focus")}),a.addEventListener("blur",function(){a.classList.remove("has-focus")})})}if("true"===ws_ls_config["is-pro"]){function b(){let b={"user-id":ws_ls_config["user-id"]};a(".ws-ls-user-pref-form select, .ws-ls-user-pref-form .custom-field").each(function(){b[a(this).attr("id")]=a(this).val()}),b["ws-ls-dob"]=a("#ws-ls-dob").val(),ws_ls_post("ws_ls_save_preferences",b,ws_ls_user_preference_callback)}a(".ws-ls-user-delete-all").validate({errorClass:"ws-ls-invalid",validClass:"ws-ls-valid",errorContainer:".ws-ls-user-delete-all .ws-ls-error-summary",errorLabelContainer:".ws-ls-user-delete-all .ws-ls-error-summary ul",wrapper:"li",messages:{"ws-ls-delete-all":ws_ls_config["validation-we-ls-history"]},submitHandler:function(a){a.submit()}}),a(".ws-ls-user-pref-form").submit(function(a){a.preventDefault(),"true"!==ws_ls_config["validation-about-you-mandatory"]&&b()});let c=!1;"true"===ws_ls_config["validation-about-you-mandatory"]&&(c=a(".ws-ls-user-pref-form").validate({errorClass:"ws-ls-invalid",validClass:"ws-ls-valid",errorContainer:".ws-ls-user-pref-form .ws-ls-error-summary",errorLabelContainer:".ws-ls-user-pref-form .ws-ls-error-summary ul",wrapper:"li",rules:ws_ls_config["validation-user-pref-rules"],messages:ws_ls_config["validation-user-pref-messages"],submitHandler:function(){b()}}),a.extend(jQuery.validator.messages,{required:ws_ls_config["validation-required"]}),a(".ws-ls-user-pref-form .we-ls-datepicker").length&&("true"===ws_ls_config["us-date"]?a(".ws-ls-user-pref-form .we-ls-datepicker").rules("add",{required:!0,date:!0}):a(".ws-ls-user-pref-form .we-ls-datepicker").rules("add",{required:!0,dateITA:!0})))}});function ws_ls_post(a,b,c){b.action=a,b.security=ws_ls_config["ajax-security-nonce"],jQuery.post(ws_ls_config["ajax-url"],b,function(a){c(b,a)})}function ws_ls_user_preference_callback(a,b){if(1==b){let a=jQuery(".ws-ls-user-pref-form").data("redirect-url");a?window.location.replace(a):window.location.replace(ws_ls_config["current-url"]+"?user-preference-saved=true")}}function ws_ls_querystring_value(a){let b=window.location.search.substring(1),c=b.split("&");for(let b,d=0;d<c.length;d++)if(b=c[d].split("="),a===b[0])return c[d]}
